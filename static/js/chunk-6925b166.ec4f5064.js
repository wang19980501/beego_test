(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6925b166"],{"7dfe":function(e,t,a){},"7f99":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"peopleManagement",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.roles.indexOf("会后存档")>-1?a("el-tab-pane",{attrs:{label:"会后存档",name:"0"}},["0"===e.activeName?a("meetingBackSave"):e._e()],1):e._e(),e._v(" "),e.roles.indexOf("历史会议")>-1?a("el-tab-pane",{attrs:{label:"历史会议",name:"1"}},["1"===e.activeName?a("historyMeeting"):e._e()],1):e._e()],1)},i=[],l=(a("cc57"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"temporaryPlay-seach bg-w"},[a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("会议室名称:")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.name,callback:function(t){e.$set(e.where,"name",t)},expression:"where.name"}})],1)]),e._v(" "),a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("会议名称:")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.meetingName,callback:function(t){e.$set(e.where,"meetingName",t)},expression:"where.meetingName"}})],1)]),e._v(" "),a("span",{staticClass:"in-block"},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:""},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.refresh")))])],1)])]),e._v(" "),a("div",{staticClass:"temporaryPlay-table bg-w mt-8"},[a("div",{staticClass:"clear-float"},[e._m(0),e._v(" "),a("div",{staticClass:"float-r"},[a("el-button",{attrs:{plain:"",icon:"el-icon-delete"},on:{click:e.deleteMore}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.moreDownload}},[e._v("批量下载")])],1)]),e._v(" "),a("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{fetchData:e.pagination,onHandleSelectionChange:e.handleSelectionChange,handleDownload:e.handleDownload,handleDelete:e.handleDelete}})],1)])}),s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:" float-l"},[a("div",{staticClass:"com-tit-m1"},[e._v("会后存档")])])}],o={hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,pagination:!0,height:539,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"下载",Fun:"handleDownload",id:"1",type:"text",isPlain:!0,status:"default"},{label:"删除",Fun:"handleDelete",id:"2",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"会议名称",prop:"meetingName",align:"left"},{id:"2",label:"会议室名称",prop:"meetingRoomName",align:"left"},{id:"3",label:"创建人",prop:"createUserName",align:"left"},{id:"4",label:"创建时间",prop:"createTime",align:"left"}],data:[]},r=a("b775");function c(e){return Object(r["a"])({url:"meetingSave/list",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/meetingSave/delete",method:"POST",data:e})}var d={name:"index",components:{},data:function(){return{where:{pageIndex:0,pageSize:0,name:"",meetingName:""},tableOption:o,dialog:{dialogVisible:!1,title:""},rules:void 0,ruleForm:{},status:"",selectionArr:[],downloadArr:[]}},methods:{chooseMeetId:function(e){this.fetchData()},pagination:function(e){this.where.pageSize=e.pageSize,this.where.pageIndex=e.pageIndex,this.fetchData()},fetchData:function(){var e=this;c(this.where).then((function(t){e.tableOption.pageTotal=t.data.page.total,e.tableOption.data=t.data.list}))},handleSelectionChange:function(e){this.selectionArr=e},moreDownload:function(){if(console.log("a"),0!==this.selectionArr.length){var e=this,t=this.selectionArr,a=0;n()}else this.$alert("请勾选列表中","提示",{confirmButtonText:"确定",type:"warning"});function n(){var i=setTimeout(n,500);t[a]&&(console.log("c"),e.handleDownload(a,t[a])),a++,a>t.length&&(clearTimeout(i),i=null)}},handleDownload:function(e,t){var a=document.createElement("a");a.href="/paperless/meetingSave/download?id="+t.id,a.click()},handleDelete:function(e,t){this.isDelete([t.id])},deleteMore:function(){if(0!==this.selectionArr.length){var e=this.selectionArr.map((function(e){return e.id}));this.isDelete(e)}else this.$alertBox("pleaseChoose")},isDelete:function(e){var t=this;this.$confirmBox("delete").then((function(){m({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))}))}}},u=d,h=a("e90a"),p=Object(h["a"])(u,l,s,!1,null,"1426d210",null),g=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"temporaryPlay-seach bg-w"},[a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("会议室名称:")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.name,callback:function(t){e.$set(e.where,"name",t)},expression:"where.name"}})],1)]),e._v(" "),a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("会议名称:")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.meetingName,callback:function(t){e.$set(e.where,"meetingName",t)},expression:"where.meetingName"}})],1)]),e._v(" "),a("span",{staticClass:"in-block"},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(t){return e.fetchData(e.where)}}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:""},on:{click:function(t){return e.fetchData(e.where)}}},[e._v(e._s(e.$t("table.refresh")))])],1)])]),e._v(" "),a("div",{staticClass:"temporaryPlay-table bg-w mt-8"},[a("div",{staticClass:"clear-float"},[e._m(0),e._v(" "),a("div",{staticClass:"float-r"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.deleteMore}},[e._v("删除记录")])],1)]),e._v(" "),a("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{fetchData:e.pagination,onHandleSelectionChange:e.handleSelectionChange,handleLook:e.handleLook,handleDelete:e.handleDelete},scopedSlots:e._u([{key:"meetingType",fn:function(t){return[e._v("\n                    "+e._s(0===t.obj.row.meetingType?"常规会议":"保密会议")+"\n                ")]}}])})],1),e._v(" "),a("DialogBox",{attrs:{dialog:e.dialog,width:"630px"},on:{submit:e.submit}},[a("el-form",{ref:"ruleForm",staticClass:"historyMeeting",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议名称: ","label-width":"95px"}},[a("div",{staticClass:"w-180"},[a("span",[e._v(e._s(e.ruleForm.meetingName))])])])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议室: ","label-width":"95px"}},[a("div",{staticClass:"w-180"},[a("span",[e._v(e._s(e.ruleForm.meetingRoomName))])])])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议时间: ","label-width":"95px"}},[a("div",{staticClass:"w-180"},[a("span",[e._v(e._s(e.ruleForm.meetingTime))])])])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议类型: ","v-model":e.ruleForm.meetingType,"label-width":"95px"}},[a("div",{staticClass:"w-180"},[a("span",[e._v(e._s(e.meetingType))])])])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"签到: ","label-width":"95px"}},[a("div",{staticClass:"w-180"},[a("span",[e._v(e._s(e.signInType))])])])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"主持人: ","label-width":"95px"}},[a("div",{staticClass:"w-180"},[a("span",[e._v(e._s(e.ruleForm.meetingHost))])])])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议标语: ","label-width":"95px"}},[a("div",{staticClass:"w-180"},[a("span",[e._v(e._s(e.ruleForm.meetingSloganName))])])])],1),e._v(" "),a("div",{staticStyle:{width:"600px"}},[a("el-form-item",{attrs:{label:"功能选择: ","label-width":"95px",prop:"meetingMenuIds"}},[a("el-checkbox-group",{model:{value:e.ruleForm.meetingMenuIds,callback:function(t){e.$set(e.ruleForm,"meetingMenuIds",t)},expression:"ruleForm.meetingMenuIds"}},e._l(e.checkOptions,(function(t){return a("el-checkbox",{key:t.id,attrs:{disabled:"",label:t.id}},[e._v(e._s(t.menuName))])})),1)],1)],1)])],1)],1)},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:" float-l"},[a("div",{staticClass:"com-tit-m1"},[e._v("历史会议")])])}],v={hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,pagination:!0,height:539,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"查看",Fun:"handleLook",id:"1",type:"text",isPlain:!0,status:"default"},{label:"删除",Fun:"handleDelete",id:"2",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"会议名称",prop:"meetingName",align:"left"},{id:"2",label:"会议室名称",prop:"meetingRoomName",align:"left"},{id:"3",label:"会议类型",prop:"meetingType",align:"left",isTemplate:!0},{id:"4",label:"创建人",prop:"createUserName",align:"left"},{id:"5",label:"会议时间",prop:"meetingTime",align:"left"}],data:[]};function _(e){return Object(r["a"])({url:"/historyMeeting/listHistoryMeeting",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/historyMeeting/delete",method:"POST",data:e})}function y(e){return Object(r["a"])({url:"/historyMeeting/get/"+e,method:"get"})}function C(){return Object(r["a"])({url:"/menu/list",method:"get"})}var k={name:"index",components:{},data:function(){return{where:{pageIndex:0,pageSize:0,name:"",meetingName:""},tableOption:v,rules:void 0,ruleForm:{meetingName:"",meetingRoomName:"",meetingType:"",meetingTime:"",meetingSloganName:""},isIndeterminate:!0,selectionArr:[],checkOptions:[],checkedArrIds:[],dialog:{dialogVisible:!1,title:"会议属性"},meetingType:"",signInType:""}},mounted:function(){var e=this;C().then((function(t){e.checkOptions=t.data,e.checkedArrIds=t.data.map((function(e){return e.id}))}))},methods:{chooseMeetId:function(e){this.fetchData()},pagination:function(e){this.where.pageSize=e.pageSize,this.where.pageIndex=e.pageIndex,this.fetchData()},fetchData:function(){var e=this;_(this.where).then((function(t){e.tableOption.pageTotal=t.data.page.total,e.tableOption.data=t.data.list}))},handleDelete:function(e,t){console.log(t.id),this.isDelete([t.id])},deleteMore:function(){if(0!==this.selectionArr.length){var e=this.selectionArr.map((function(e){return e.id}));this.isDelete(e)}else this.$alertBox("pleaseChoose")},isDelete:function(e){var t=this;this.$confirmBox("delete").then((function(){w({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))}))},handleSelectionChange:function(e){this.selectionArr=e},handleLook:function(e,t){var a=this;this.clear(),y(t.id).then((function(e){a.ruleForm=e.data,console.log(a.ruleForm.meetingRoomName),"0"===a.ruleForm.meetingType?a.meetingType="常规会议":a.meetingType="保密会议",console.log(a.ruleForm.signInType),1===a.ruleForm.signInType?a.signInType="禁用":2===a.ruleForm.signInType?a.signInType="按键签到":3===a.ruleForm.signInType?a.signInType="密码签到":a.signInType="手写签到",a.dialog={dialogVisible:!0,title:"查看"},a.fetchData()}))},submit:function(){this.dialog.dialogVisible=!1,this.fetchData()},clear:function(){this.ruleForm={meetingName:"",meetingRoomName:"",meetingType:"",meetingTime:"",meetingSloganName:""}}}},x=k,D=(a("cd43"),Object(h["a"])(x,f,b,!1,null,null,null)),T=D.exports,N={data:function(){return{activeName:this.$route.query.routerId}},components:{meetingBackSave:g,historyMeeting:T},computed:{roles:function(){return this.$store.state.user.roles}},mounted:function(){},methods:{handleClick:function(e,t){this.$router.push({name:"MeetingAfter",query:{routerId:e.name}})}}},O=N,S=Object(h["a"])(O,n,i,!1,null,null,null);t["default"]=S.exports},cd43:function(e,t,a){"use strict";var n=a("7dfe"),i=a.n(n);i.a}}]);