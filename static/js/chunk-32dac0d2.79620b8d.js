(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32dac0d2"],{"01f9":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("f753"),l=a.n(i),n=a("2ca7"),s=a("5f87");function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,o){l.a.defaults.headers["content-type"]="application/json;charset=UTF-8",l()({method:"get",url:"/paperless"+e,params:a,responseType:"blob",headers:{token:Object(s["d"])()}}).then((function(e){i(e.data);var a=new Blob([e.data],{type:"application/vnd.ms-excel"}),l=t;if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,l);else{var s=document.createElement("a");s.href=window.URL.createObjectURL(a),s.download=l,s.click(),window.URL.revokeObjectURL(s.href)}Object(n["Message"])({message:"导出成功",type:"success",duration:1e3})}),(function(e){Object(n["Message"])({message:"导出失败",type:"error",duration:1e3}),o(e)}))}))}},1848:function(e,t,a){},"23a1":function(e,t,a){},"242d":function(e,t,a){"use strict";var i=a("7ab5"),l=a.n(i);l.a},"3a1e":function(e,t,a){},"4e03":function(e,t,a){"use strict";var i=a("d962"),l=a.n(i);l.a},5068:function(e,t,a){},"5bc4":function(e,t,a){},"5c19":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"peopleManagement",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.roles.indexOf("会议室管理")>-1?a("el-tab-pane",{attrs:{label:"会议室管理",name:"0"}},["0"===e.activeName?a("meetingRoomManage"):e._e()],1):e._e(),e._v(" "),e.roles.indexOf("会议列表")>-1?a("el-tab-pane",{attrs:{label:"会议列表",name:"1"}},["1"===e.activeName?a("meetingList"):e._e()],1):e._e(),e._v(" "),e.roles.indexOf("会议议程")>-1?a("el-tab-pane",{attrs:{label:"会议议程",name:"2"}},["2"===e.activeName?a("meetingAgenda"):e._e()],1):e._e(),e._v(" "),e.roles.indexOf("会议资料")>-1?a("el-tab-pane",{attrs:{label:"会议资料",name:"3"}},["3"===e.activeName?a("meetingMaterial"):e._e()],1):e._e(),e._v(" "),e.roles.indexOf("共享文件")>-1?a("el-tab-pane",{attrs:{label:"共享文件",name:"4"}},["4"===e.activeName?a("sharedFile"):e._e()],1):e._e(),e._v(" "),e.roles.indexOf("投票表决")>-1?a("el-tab-pane",{attrs:{label:"投票表决",name:"5"}},["5"===e.activeName?a("voteByBallot"):e._e()],1):e._e(),e._v(" "),e.roles.indexOf("会议标语")>-1?a("el-tab-pane",{attrs:{label:"会议标语",name:"6"}},["6"===e.activeName?a("meetingTheSlogan"):e._e()],1):e._e()],1)},l=[],n=(a("cc57"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"temporaryPlay-seach bg-w"},[a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("会议室: ")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.name,callback:function(t){e.$set(e.where,"name",t)},expression:"where.name"}})],1)]),e._v(" "),a("span",{staticClass:"in-block"},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:""},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.refresh")))])],1)])]),e._v(" "),a("div",{staticClass:"temporaryPlay-table bg-w mt-8"},[a("div",{staticClass:"clear-float"},[e._m(0),e._v(" "),a("div",{staticClass:"float-r"},[a("el-button",{attrs:{plain:""},on:{click:e.deleteMore}},[e._v("删除会议室")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addList}},[e._v("新增会议室")])],1)]),e._v(" "),a("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{fetchData:e.pagination,onHandleSelectionChange:e.handleSelectionChange,handleEdit:e.handleEdit,handleUp:e.handleUp,handleDown:e.handleDown,handleStop:e.handleStop,handleDelete:e.handleDelete}})],1),e._v(" "),a("DialogBox",{attrs:{dialog:e.dialog,width:"425px"},on:{submit:e.submit,open:e.getChoose}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"135px"}},[a("el-form-item",{attrs:{label:"会议室名称: ",prop:"meetingRoomName"}},[a("div",{staticClass:"w-150"},[a("el-input",{model:{value:e.ruleForm.meetingRoomName,callback:function(t){e.$set(e.ruleForm,"meetingRoomName",t)},expression:"ruleForm.meetingRoomName"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"开始终端: ",prop:"startDevice"}},[a("div",{staticClass:"w-150"},[a("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.ruleForm.startDevice,callback:function(t){e.$set(e.ruleForm,"startDevice",e._n(t))},expression:"ruleForm.startDevice"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"结束终端: ",prop:"endDevice"}},[a("div",{staticClass:"w-150"},[a("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.ruleForm.endDevice,callback:function(t){e.$set(e.ruleForm,"endDevice",e._n(t))},expression:"ruleForm.endDevice"}})],1)]),e._v(" "),a("div",[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"关联升降组器: "}},[a("el-select",{staticClass:"w-150",attrs:{multiple:""},model:{value:e.ruleForm.regulatorIds,callback:function(t){e.$set(e.ruleForm,"regulatorIds",t)},expression:"ruleForm.regulatorIds"}},e._l(e.regulatorIdArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"in-block ml-10",staticStyle:{"vertical-align":"top"}},[a("el-button",{attrs:{plain:"",icon:"el-icon-plus"},on:{click:function(t){return e.jump("1")}}},[e._v("创建")])],1)]),e._v(" "),a("div",[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"关联流媒体终端: "}},[a("el-select",{staticClass:"w-150",attrs:{multiple:"","multiple-limit":9},model:{value:e.ruleForm.mediaDeviceIds,callback:function(t){e.$set(e.ruleForm,"mediaDeviceIds",t)},expression:"ruleForm.mediaDeviceIds"}},e._l(e.mediaDeviceIdArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"in-block ml-10",staticStyle:{"vertical-align":"top"}},[a("el-button",{attrs:{plain:"",icon:"el-icon-plus"},on:{click:function(t){return e.jump("2")}}},[e._v("创建")])],1)]),e._v(" "),a("div",[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"关联信息发布终端: "}},[a("el-select",{staticClass:"w-150",attrs:{multiple:""},model:{value:e.ruleForm.releaseDeviceIds,callback:function(t){e.$set(e.ruleForm,"releaseDeviceIds",t)},expression:"ruleForm.releaseDeviceIds"}},e._l(e.releaseDeviceIdArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"in-block ml-10",staticStyle:{"vertical-align":"top"}},[a("el-button",{attrs:{plain:"",icon:"el-icon-plus"},on:{click:function(t){return e.jump("3")}}},[e._v("创建")])],1)]),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"升降器组控制: "}},[a("el-radio-group",{model:{value:e.ruleForm.lookFlag,callback:function(t){e.$set(e.ruleForm,"lookFlag",t)},expression:"ruleForm.lookFlag"}},[a("el-radio",{attrs:{label:0}},[e._v("服务器")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("客户端")])],1)],1)],1),e._v(" "),1===e.ruleForm.lookFlag?a("div",[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"终端列表: "}},[a("el-select",{staticClass:"w-150",model:{value:e.ruleForm.deviceIds,callback:function(t){e.$set(e.ruleForm,"deviceIds",t)},expression:"ruleForm.deviceIds"}},e._l(""===e.ruleForm.endDevice?0:Number(e.ruleForm.endDevice),(function(t){return t>=Number(e.ruleForm.startDevice)?a("el-option",{key:t,attrs:{label:t,value:t}}):e._e()})),1)],1)],1)]):e._e()],1)],1)],1)}),s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:" float-l"},[a("div",{staticClass:"com-tit-m1"},[e._v("会议室管理")])])}],o={hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,pagination:!0,height:539,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"上升",Fun:"handleUp",id:"1",type:"text",isPlain:!0,status:"default"},{label:"下降",Fun:"handleDown",id:"2",type:"text",isPlain:!0,status:"default"},{label:"停止",Fun:"handleStop",id:"3",type:"text",isPlain:!0,status:"default"},{label:"edit",Fun:"handleEdit",id:"4",type:"text",isPlain:!0,status:"default"},{label:"delete",Fun:"handleDelete",id:"5",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"会议室名称",prop:"meetingRoomName",align:"left"},{id:"2",label:"开始终端ID",prop:"startDevice",align:"left"},{id:"3",label:"结束终端ID",prop:"endDevice",align:"left"},{id:"4",label:"关联升降器组",prop:"regulatorName",align:"left"},{id:"5",label:"关联流媒体终端",prop:"mediaDeviceName",align:"left"},{id:"6",label:"关联信息发布终端",prop:"releaseDeviceName",align:"left"}],data:[]},r={meetingRoomName:[{required:!0,message:"请输入",trigger:"blur"}],startDevice:[{required:!0,message:"请输入",trigger:"blur"}],endDevice:[{required:!0,message:"请输入",trigger:"blur"}]},c=a("b775");function d(e){return Object(c["a"])({url:"/meetingRoom/list",method:"POST",data:e})}function u(e){return Object(c["a"])({url:"/regulator/selectList",method:"get"})}function m(e){return Object(c["a"])({url:"/streamMedia/selectList",method:"get"})}function h(e){return Object(c["a"])({url:"/messageRelease/selectList",method:"get"})}function p(e){return Object(c["a"])({url:"/meetingRoom/save",method:"POST",data:e})}function g(e){return Object(c["a"])({url:"/meetingRoom/delete",method:"POST",data:e})}function f(e){return Object(c["a"])({url:"/meetingRoom/get/"+e,method:"get"})}function b(e){return Object(c["a"])({url:"/meetingRoom/update",method:"POST",data:e})}function v(){return Object(c["a"])({url:"/device/selectList",method:"get"})}function _(e){return Object(c["a"])({url:"/meetingRoom/up/"+e,method:"get"})}function y(e){return Object(c["a"])({url:"/meetingRoom/stop/"+e,method:"get"})}function F(e){return Object(c["a"])({url:"/meetingRoom/down/"+e,method:"get"})}var w={name:"index",data:function(){return{where:{pageIndex:0,pageSize:0,name:""},tableOption:o,dialog:{dialogVisible:!1,title:""},rules:r,ruleForm:{endDevice:"",mediaDeviceIds:[],meetingRoomName:"",regulatorIds:[],releaseDeviceIds:[],startDevice:"",lookFlag:0,deviceIds:0},regulatorIdArr:[],mediaDeviceIdArr:[],releaseDeviceIdArr:[],deviceListArr:[],selectionArr:[]}},mounted:function(){},methods:{getChoose:function(){var e=this;m().then((function(t){e.mediaDeviceIdArr=t.data})),u().then((function(t){e.regulatorIdArr=t.data})),h().then((function(t){e.releaseDeviceIdArr=t.data}))},getDeviceList:function(){var e=this;v().then((function(t){e.deviceListArr=t.data}))},addList:function(){this.dialog={dialogVisible:!0,title:"新增会议室"},this.clear()},pagination:function(e){this.where.pageSize=e.pageSize,this.where.pageIndex=e.pageIndex,this.fetchData()},fetchData:function(){var e=this;d(this.where).then((function(t){e.tableOption.pageTotal=t.data.page.total,e.tableOption.data=t.data.list}))},handleEdit:function(e,t){var a=this;this.clear(),f(t.id).then((function(e){a.ruleForm=e.data,a.dialog={dialogVisible:!0,title:"编辑会议室"}}))},handleDelete:function(e,t){this.isDelete([t.id])},deleteMore:function(){if(0!==this.selectionArr.length){var e=this.selectionArr.map((function(e){return e.id}));this.isDelete(e)}else this.$alertBox("pleaseChoose")},isDelete:function(e){var t=this;this.$confirmBox("delete").then((function(){g({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))}))},handleSelectionChange:function(e){this.selectionArr=e},submit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;"新增会议室"===e.dialog.title?p(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()})):b(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()}))}))},clear:function(){this.ruleForm={endDevice:"",mediaDeviceIds:[],meetingRoomName:"",regulatorIds:[],releaseDeviceIds:[],startDevice:"",lookFlag:0,deviceIds:0},void 0!=this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},jump:function(e){this.$router.push({name:"DeviceManagement",query:{routerId:e}})},handleUp:function(e,t){var a=this;_(t.id).then((function(e){a.$message({message:e.msg,type:"success",duration:1e3})}))},handleDown:function(e,t){var a=this;F(t.id).then((function(e){a.$message({message:e.msg,type:"success",duration:1e3})}))},handleStop:function(e,t){var a=this;y(t.id).then((function(e){a.$message({message:e.msg,type:"success",duration:1e3})}))}}},S=w,k=a("e90a"),C=Object(k["a"])(S,n,s,!1,null,"91b8952e",null),x=C.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"temporaryPlay-seach bg-w"},[a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("会议室: ")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.name,callback:function(t){e.$set(e.where,"name",t)},expression:"where.name"}})],1)]),e._v(" "),a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("会议名称: ")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.meetingName,callback:function(t){e.$set(e.where,"meetingName",t)},expression:"where.meetingName"}})],1)]),e._v(" "),a("span",{staticClass:"in-block"},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:""},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.refresh")))])],1)])]),e._v(" "),a("div",{staticClass:"temporaryPlay-table bg-w mt-8"},[a("div",{staticClass:"clear-float"},[e._m(0),e._v(" "),a("div",{staticClass:"float-r"},[a("el-button",{attrs:{plain:""},on:{click:e.deleteMore}},[e._v("删除会议")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){return e.copyMeeting()}}},[e._v("复制会议")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addList}},[e._v("预约会议")])],1)]),e._v(" "),a("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{fetchData:e.pagination,onHandleSelectionChange:e.handleSelectionChange,handleStartUp:e.handleStartUp,handleEnd:e.handleEnd,handleEdit:e.handleEdit,handleDelete:e.handleDelete},scopedSlots:e._u([{key:"editFlag",fn:function(t){return[a("el-switch",{attrs:{value:0!==t.obj.row.editFlag,"active-color":"#13ce66"},on:{change:function(a){return e.changeDoing(t.obj.row)}}})]}},{key:"meetingType",fn:function(t){return[e._v("\n                "+e._s(0===t.obj.row.meetingType?"常规会议":"保密会议")+"\n            ")]}},{key:"meetingStatus",fn:function(t){return[a("div",{staticClass:"spot2",class:0===t.obj.row.meetingStatus?"suss":1===t.obj.row.meetingStatus?"onLine":2===t.obj.row.meetingStatus?"over ":"dangerous"}),e._v("\n                "+e._s(0===t.obj.row.meetingStatus?"未开始":1===t.obj.row.meetingStatus?"进行中":2===t.obj.row.meetingStatus?"已结束 ":"审批未通过")+"\n            ")]}},{key:"signInType",fn:function(t){return[e._v("\n                "+e._s(1===t.obj.row.signInType?"禁用":2===t.obj.row.signInType?"按键签到":3===t.obj.row.signInType?"密码签到 ":"手写签到")+"\n            ")]}}])})],1),e._v(" "),a("DialogBox",{attrs:{dialog:e.dialog,width:"843px"},on:{submit:e.submit}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议名称: ",prop:"meetingName","label-width":"95px"}},[a("div",{staticClass:"w-274"},[a("el-input",{attrs:{disabled:1!==e.ruleForm.editFlag},model:{value:e.ruleForm.meetingName,callback:function(t){e.$set(e.ruleForm,"meetingName",t)},expression:"ruleForm.meetingName"}})],1)])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"主持人: ",prop:"meetingHost"}},[a("div",{staticClass:"w-274"},[a("el-input",{attrs:{disabled:1!==e.ruleForm.editFlag},model:{value:e.ruleForm.meetingHost,callback:function(t){e.$set(e.ruleForm,"meetingHost",t)},expression:"ruleForm.meetingHost"}})],1)])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议时间: ",prop:"meetingTime","label-width":"95px"}},[a("div",{staticClass:"w-274"},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"-","value-format":"yyyy年MM月dd日 HH:mm:ss",placeholder:"选择日期",disabled:1!==e.ruleForm.editFlag},model:{value:e.ruleForm.meetingTime,callback:function(t){e.$set(e.ruleForm,"meetingTime",t)},expression:"ruleForm.meetingTime"}})],1)])],1),e._v(" "),a("div",{staticClass:"in-block"},[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议标语: "}},[a("el-select",{staticStyle:{width:"187px"},attrs:{disabled:1!==e.ruleForm.editFlag},model:{value:e.ruleForm.meetingSloganId,callback:function(t){e.$set(e.ruleForm,"meetingSloganId",t)},expression:"ruleForm.meetingSloganId"}},[a("el-option",{attrs:{label:"请选择",value:0}}),e._v(" "),e._l(e.meetingSloganArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.meetingSloganName,value:e.id}})}))],2)],1)],1),e._v(" "),a("span",{staticClass:"in-block ml-10",staticStyle:{"vertical-align":"top"}},[a("el-button",{attrs:{plain:"",icon:"el-icon-plus"},on:{click:function(t){return e.jump("6")}}},[e._v("创建")])],1)]),e._v(" "),a("div",{staticClass:"in-block"},[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议室: ",prop:"meetingRoomIds","label-width":"95px"}},[a("el-select",{staticStyle:{width:"187px"},attrs:{multiple:"",placeholder:"请选择",disabled:1!==e.ruleForm.editFlag},model:{value:e.ruleForm.meetingRoomIds,callback:function(t){e.$set(e.ruleForm,"meetingRoomIds",t)},expression:"ruleForm.meetingRoomIds"}},e._l(e.meetingRoomIdArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.meetingRoomName,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"in-block ml-10",staticStyle:{"vertical-align":"top"}},[a("el-button",{attrs:{plain:"",icon:"el-icon-plus"},on:{click:function(t){return e.jump("0")}}},[e._v("创建")])],1)]),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"签到: "}},[a("el-select",{staticClass:"w-274",attrs:{disabled:1!==e.ruleForm.editFlag},model:{value:e.ruleForm.signInType,callback:function(t){e.$set(e.ruleForm,"signInType",t)},expression:"ruleForm.signInType"}},[a("el-option",{attrs:{label:"禁用",value:1}}),e._v(" "),a("el-option",{attrs:{label:"按键签到",value:2}}),e._v(" "),a("el-option",{attrs:{label:"密码签到",value:3}}),e._v(" "),a("el-option",{attrs:{label:"手写签到",value:4}})],1)],1)],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"会议类型: ",prop:"meetingType","label-width":"95px"}},[a("el-select",{staticClass:"w-274",attrs:{disabled:1!==e.ruleForm.editFlag},model:{value:e.ruleForm.meetingType,callback:function(t){e.$set(e.ruleForm,"meetingType",t)},expression:"ruleForm.meetingType"}},[a("el-option",{attrs:{label:"常规会议",value:0}}),e._v(" "),a("el-option",{attrs:{label:"保密会议",value:1}})],1)],1)],1),e._v(" "),a("span",{staticClass:"in-block"},[3===e.ruleForm.signInType?a("el-form-item",{attrs:{label:"签到密码: ",prop:"signInPassword"}},[a("div",{staticClass:"w-274"},[a("el-input",{attrs:{disabled:1!==e.ruleForm.editFlag,maxlength:"6"},on:{input:e.accountInput},model:{value:e.ruleForm.signInPassword,callback:function(t){e.$set(e.ruleForm,"signInPassword",t)},expression:"ruleForm.signInPassword"}})],1)]):e._e()],1),e._v(" "),a("div",{staticStyle:{width:"600px"}},[a("el-form-item",{attrs:{label:"功能选择: ","label-width":"95px",prop:"meetingMenuIds"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate,disabled:1!==e.ruleForm.editFlag},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.ruleForm.meetingMenuIds,callback:function(t){e.$set(e.ruleForm,"meetingMenuIds",t)},expression:"ruleForm.meetingMenuIds"}},e._l(e.checkOptions,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id,disabled:1!==e.ruleForm.editFlag}},[e._v(e._s(t.menuName))])})),1)],1)],1)])],1)],1)},D=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:" float-l"},[a("div",{staticClass:"com-tit-m1"},[e._v("会议列表")])])}],I=(a("9dd9"),{hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,pagination:!0,height:539,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"启动",Fun:"handleStartUp",id:"1",type:"text",isPlain:!0,status:"default"},{label:"结束",Fun:"handleEnd",id:"2",type:"text",isPlain:!0,status:"default"},{label:"edit",Fun:"handleEdit",id:"3",type:"text",isPlain:!0,status:"default"},{label:"delete",Fun:"handleDelete",id:"4",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"状态",prop:"meetingStatus",align:"left",isTemplate:!0},{id:"2",label:"编辑状态",prop:"editFlag",align:"left",isTemplate:!0},{id:"3",label:"会议名称",prop:"meetingName",align:"left"},{id:"4",label:"会议室",prop:"meetingRoomName",align:"left"},{id:"5",label:"会议时间",prop:"meetingTime",align:"left"},{id:"6",label:"会议类型",prop:"meetingType",align:"left",isTemplate:!0},{id:"7",label:"会议标语",prop:"meetingSloganName",align:"left"},{id:"8",label:"主持人",prop:"meetingHost",align:"left"},{id:"9",label:"签到",prop:"signInType",align:"left",isTemplate:!0},{id:"10",label:"管理员",prop:"createUserName",align:"left"}],data:[]}),T={meetingName:[{required:!0,message:"请输入",trigger:"blur"}],signInPassword:[{required:!0,message:"请输入",trigger:"blur"}],meetingRoomIds:[{required:!0,message:"请选择",trigger:"change"}],meetingType:[{required:!0,message:"请选择",trigger:"change"}],meetingTime:[{required:!0,message:"请选择日期",trigger:"change"}],meetingMenuIds:[{type:"array",required:!0,message:"请选择",trigger:"change"}]};function $(e){return Object(c["a"])({url:"/meeting/list",method:"POST",data:e})}function j(){return Object(c["a"])({url:"/meetingRoom/selectList",method:"get"})}function A(e){return Object(c["a"])({url:"/meetingSlogan/list",method:"POST",data:e})}function N(){return Object(c["a"])({url:"/menu/list",method:"get"})}function P(e){return Object(c["a"])({url:"/meeting/save",method:"POST",data:e})}function M(e){return Object(c["a"])({url:"/meeting/delete",method:"POST",data:e})}function E(e){return Object(c["a"])({url:"/meeting/get/"+e,method:"get"})}function B(e){return Object(c["a"])({url:"/meeting/copyMeeting/"+e,method:"get"})}function V(e){return Object(c["a"])({url:"/meeting/update",method:"POST",data:e})}function L(e){return Object(c["a"])({url:"/meeting/updateEditStatus",method:"POST",data:e})}function z(e){return Object(c["a"])({url:"/meeting/updateStatus",method:"POST",data:e})}var R=a("5f87"),U=a("8e9a"),H={name:"index",data:function(){return{where:{pageIndex:0,pageSize:0,name:"",meetName:""},tableOption:I,dialog:{dialogVisible:!1,title:""},rules:T,ruleForm:{meetingName:"",meetingTime:[],meetingRoomIds:[],meetingType:"",meetingHost:"",meetingSloganId:0,meetingMenuIds:[],signInType:1,signInPassword:"",editFlag:1},checkAll:!1,checkedArrIds:[],checkOptions:[],isIndeterminate:!0,meetingRoomIdArr:[],meetingSloganArr:[],selectionArr:[]}},mounted:function(){var e=this;j().then((function(t){e.meetingRoomIdArr=t.data})),A({name:"",pageFlag:0}).then((function(t){e.meetingSloganArr=t.data.list})),N().then((function(t){e.checkOptions=t.data,e.checkedArrIds=t.data.map((function(e){return e.id}))}))},methods:{pagination:function(e){this.where.pageSize=e.pageSize,this.where.pageIndex=e.pageIndex,this.fetchData()},fetchData:function(){var e=this;$(this.where).then((function(t){e.tableOption.pageTotal=t.data.page.total,e.tableOption.data=t.data.list}))},copyMeeting:function(){var e=this;1===this.selectionArr.length?B(this.selectionArr[0].id).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.fetchData()})):this.$alertBox("pleaseChoose")},handleStartUp:function(e,t){if(1!==t.meetingStatus){var a={id:t.id,status:1};this.changeUpdateStatus(a)}else this.$alertBox("meetingCannotBeStarted")},handleEnd:function(e,t){var a={id:t.id,status:2};this.changeUpdateStatus(a)},changeUpdateStatus:function(e){var t=this;z(e).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))},changeDoing:function(e){var t=this,a={id:e.id,status:0===e.editFlag?1:0};L(a).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))},addList:function(){this.clear(),this.dialog={dialogVisible:!0,title:"预约会议"},this.ruleForm.meetingMenuIds=this.checkedArrIds},handleEdit:function(e,t){var a=this;this.clear(),E(t.id).then((function(e){a.ruleForm=e.data,a.ruleForm.meetingTime=[e.data.startTime,e.data.endTime],a.dialog={dialogVisible:!0,title:"编辑会议"}}))},handleDelete:function(e,t){this.isDelete([t.id])},deleteMore:function(){if(0!==this.selectionArr.length){var e=this.selectionArr.map((function(e){return e.id}));this.isDelete(e)}else this.$alertBox("pleaseChoose")},isDelete:function(e){var t=this;this.$confirmBox("delete").then((function(){M({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))}))},handleSelectionChange:function(e){this.selectionArr=e},submit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.ruleForm.startTime=e.ruleForm.meetingTime[0],e.ruleForm.endTime=e.ruleForm.meetingTime[1],"预约会议"===e.dialog.title?P(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()})):V(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()}))}))},clear:function(){this.ruleForm={meetingName:"",meetingTime:[],meetingRoomIds:[],meetingType:"",meetingHost:"",meetingSloganId:0,meetingMenuIds:[],signInType:1,signInPassword:"",editFlag:1},void 0!=this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},handleCheckAllChange:function(e){this.ruleForm.meetingMenuIds=e?this.checkedArrIds:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.checkOptions.length,this.isIndeterminate=t>0&&t<this.checkOptions.length},jump:function(e){this.$router.push({name:"MeetingBefore",query:{routerId:e}}),U["a"].$emit("jump",e)},accountInput:function(e){for(var t=new RegExp("[A-Za-z0-9]+"),a=e.length,i="",l=0;l<a;l++)t.test(e[l])&&(i+=e[l]);this.ruleForm.signInPassword=i}}},q=H,G=(a("6aa8"),Object(k["a"])(q,O,D,!1,null,null,null)),W=G.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"temporaryPlay-table bg-w mt-8"},[a("div",{staticClass:"clear-float"},[a("div",{staticClass:" float-l"},[a("chooseMeet",{attrs:{showText:!1},on:{chooseMeetId:e.chooseMeetId}})],1),e._v(" "),a("div",{staticClass:"float-r"},[a("a",{attrs:{href:"/paperless/file/download?fileType=2&typeId=0"}},[a("el-button",{attrs:{plain:""}},[e._v("下载模板")])],1),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.deleteMore}},[e._v("删除议程")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialog2.dialogVisible=!0}}},[e._v("导入议程")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.exportList}},[e._v("下载议程")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addList}},[e._v("新增议程")])],1)]),e._v(" "),a("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{fetchData:e.pagination,onHandleSelectionChange:e.handleSelectionChange,handleEdit:e.handleEdit,handleDelete:e.handleDelete}})],1),e._v(" "),a("DialogBox",{attrs:{dialog:e.dialog,width:"460px"},on:{submit:e.submit}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"议程时间: "}},[a("div",{staticStyle:{width:"333px"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"-","value-format":"yyyy年MM月dd日 HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)])],1),e._v(" "),a("span",{staticClass:"content"},[a("el-form-item",{attrs:{label:"议程内容: "}},[a("div",{staticStyle:{width:"333px"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入议程内容",maxlength:"50","show-word-limit":""},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1)])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"发言人: "}},[a("div",{staticClass:"w-150"},[a("el-input",{attrs:{placeholder:"请输入发言人名称"},model:{value:e.ruleForm.spokesman,callback:function(t){e.$set(e.ruleForm,"spokesman",t)},expression:"ruleForm.spokesman"}})],1)])],1)])],1),e._v(" "),a("DialogExport",{attrs:{dialog:e.dialog2,url:"/agenda/importExcel?meetingId="+this.where.meetingId},on:{handleAvatarSuccess:e.handleAvatarSuccess}})],1)},K=[],Z=(a("9a33"),{hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,pagination:!0,height:539,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"编辑",Fun:"handleEdit",id:"4",type:"text",isPlain:!0,status:"default"},{label:"删除",Fun:"handleDelete",id:"1",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"时间",prop:"time",align:"left"},{id:"2",label:"内容",prop:"content",align:"left"},{id:"3",label:"发言人",prop:"spokesman",align:"left"}],data:[]}),Q={content:[{required:!0,message:"请输入内容",trigger:"blur"}],spokesman:[{required:!0,message:"请输入发言人名称",trigger:"blur"}]};function X(e){return Object(c["a"])({url:"/agenda/list",method:"POST",data:e})}function Y(e){return Object(c["a"])({url:"/agenda/save",method:"POST",data:e})}function ee(e){return Object(c["a"])({url:"/agenda/delete",method:"POST",data:e})}function te(e){return Object(c["a"])({url:"/agenda/get/"+e,method:"get"})}function ae(e){return Object(c["a"])({url:"/agenda/update",method:"POST",data:e})}var ie=a("af19"),le=a("01f9"),ne=a("c185"),se={name:"index",components:{importFile:ie["a"],DialogExport:ne["a"]},data:function(){return{where:{pageIndex:0,pageSize:0,meetingId:""},tableOption:Z,dialog:{dialogVisible:!1,title:""},rules:Q,ruleForm:{time:[],content:"",spokesman:""},value1:"",status:0,selectionArr:[],dialog2:{dialogVisible:!1,title:"导入议程"}}},methods:{addList:function(){this.clear(),this.dialog={dialogVisible:!0,title:"新增议程"}},chooseMeetId:function(e){this.where.meetingId=e,this.fetchData()},pagination:function(e){this.where.pageSize=e.pageSize,this.where.pageIndex=e.pageIndex,this.fetchData()},fetchData:function(){var e=this;""!==this.where.meetingId?X(this.where).then((function(t){e.tableOption.pageTotal=t.data.page.total,e.tableOption.data=t.data.list})):this.tableOption.data=[]},handleAvatarSuccess:function(){this.where.pageIndex=1,this.where.pageSize=10,this.fetchData()},handleEdit:function(e,t){var a=this;te(t.id).then((function(e){a.ruleForm=e.data,a.ruleForm.time=e.data.time.split("-"),a.dialog={dialogVisible:!0,title:"编辑议程"}}))},handleDelete:function(e,t){this.isDelete([t.id])},deleteMore:function(){if(0!==this.selectionArr.length){var e=this.selectionArr.map((function(e){return e.id}));this.isDelete(e)}else this.$alertBox("pleaseChoose")},isDelete:function(e){var t=this;this.$confirmBox("delete").then((function(){ee({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))}))},handleSelectionChange:function(e){this.selectionArr=e},submit:function(){var e=this;""!==this.where.meetingId?this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.ruleForm.meetingId=e.where.meetingId,e.ruleForm.time=null===e.ruleForm.time?"":e.ruleForm.time.join("-"),"新增议程"===e.dialog.title?Y(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()})):ae(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()}))})):this.$alertBox("pleaseAddOrStartTheMeeting")},clear:function(){this.ruleForm={time:[],content:"",spokesman:""}},exportList:function(){var e=document.createElement("a");e.href="/paperless/agenda/exportExcel/"+this.where.meetingId,e.click()}}},oe=se,re=(a("7d55"),Object(k["a"])(oe,J,K,!1,null,null,null)),ce=re.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"temporaryPlay-seach bg-w"},[a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("议题名称: ")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.name,callback:function(t){e.$set(e.where,"name",t)},expression:"where.name"}})],1)]),e._v(" "),a("span",{staticClass:"in-block"},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:""},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.refresh")))])],1)])]),e._v(" "),a("div",{staticClass:"temporaryPlay-table bg-w mt-8"},[a("div",{staticClass:"clear-float"},[a("div",{staticClass:" float-l"},[a("chooseMeet",{attrs:{showText:!1},on:{chooseMeetId:e.chooseMeetId}})],1),e._v(" "),a("div",{staticClass:"float-r"},[a("el-button",{attrs:{plain:""},on:{click:e.deleteMore}},[e._v("删除议题")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addList}},[e._v("新增议题")])],1)]),e._v(" "),a("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{fetchData:e.pagination,onHandleSelectionChange:e.handleSelectionChange,handleUpload:e.handleUpload,handleEdit:e.handleEdit,handleDelete:e.handleDelete},scopedSlots:e._u([{key:"issuesStatus",fn:function(t){return[a("el-switch",{staticClass:"mr-5",attrs:{value:0!==t.obj.row.issuesStatus,"active-color":"#13ce66"},on:{change:function(a){return e.changeDoing(t.obj.row)}}}),e._v(" "),a("span",[e._v(e._s(0===t.obj.row.issuesStatus?"禁用":"启用"))])]}},{key:"fileNum",fn:function(t){return[a("i",{staticClass:"el-icon-paperclip mr-10"}),a("span",{on:{click:function(a){return e.rowClick(t.obj.row)}}},[e._v(e._s(0===t.obj.row.fileNum?"无":"点击查看"))])]}}])})],1),e._v(" "),a("DialogBox",{attrs:{dialog:e.dialog,width:"665px"},on:{submit:e.submit}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"155px"}},[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"议题名称: ",prop:"issuesName","label-width":"90px"}},[a("div",{staticClass:"w-150"},[a("el-input",{model:{value:e.ruleForm.issuesName,callback:function(t){e.$set(e.ruleForm,"issuesName",t)},expression:"ruleForm.issuesName"}})],1)])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"议题概要: "}},[a("div",{staticClass:"w-150"},[a("el-input",{model:{value:e.ruleForm.issuesGeneral,callback:function(t){e.$set(e.ruleForm,"issuesGeneral",t)},expression:"ruleForm.issuesGeneral"}})],1)])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"排序序号: ","label-width":"90px"}},[a("div",{staticClass:"w-150"},[a("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1)])],1),e._v(" "),a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"启用状态"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.issuesStatus,callback:function(t){e.$set(e.ruleForm,"issuesStatus",t)},expression:"ruleForm.issuesStatus"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"查看权限","label-width":"90px"}},[a("el-radio-group",{model:{value:e.ruleForm.relationType,callback:function(t){e.$set(e.ruleForm,"relationType",t)},expression:"ruleForm.relationType"}},[a("el-radio",{attrs:{label:0}},[e._v("按选择人员")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("按人员分组")])],1)],1)],1),e._v(" "),0===e.ruleForm.relationType?a("div",[a("tl-table",{ref:"table2",staticClass:"mt-10",attrs:{table:e.tableOption2},on:{onHandleSelectionChange:e.handleSelectionChange2}})],1):e._e(),e._v(" "),1===e.ruleForm.relationType?a("div",[a("tl-table",{ref:"table4",staticClass:"mt-10",attrs:{table:e.tableOption4},on:{onHandleSelectionChange:e.handleSelectionChange4}})],1):e._e()],1),e._v(" "),a("DialogBox",{attrs:{dialog:e.dialog2,width:"665px"},on:{submit:e.submit3,close:e.closeDownLoad}},[a("div",{staticClass:"daloge-herder-box2"},[a("el-button",{attrs:{plain:""},on:{click:e.deleteMore3}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.moreDownload}},[e._v("批量下载")])],1),e._v(" "),a("tl-table",{ref:"table3",staticClass:"mt-10",attrs:{table:e.tableOption3},on:{onSortChange:e.onSortChange,onHandleSelectionChange:e.handleSelectionChange3,handleDelete:e.handleDelete3,handleDownload:e.handleDownload},scopedSlots:e._u([{key:"fileSize",fn:function(t){return[e._v("\n                "+e._s(e.getfilesize(t.obj.row.fileSize))+"\n            ")]}}])})],1),e._v(" "),a("uploadTable",{attrs:{dialog:e.dialog3,main:{fileType:"issuesFile",typeId:e.typeId}},on:{submit:e.submit4}})],1)},ue=[],me={hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,pagination:!0,height:539,index:!0,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"upload",Fun:"handleUpload",id:"3",type:"text",isPlain:!0,status:"default"},{label:"edit",Fun:"handleEdit",id:"1",type:"text",isPlain:!0,status:"default"},{label:"delete",Fun:"handleDelete",id:"2",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"议题名称",prop:"issuesName",align:"left"},{id:"2",label:"会议资料",prop:"fileNum",align:"left",isTemplate:!0},{id:"3",label:"议题概要",prop:"issuesGeneral",align:"left"},{id:"4",label:"状态",prop:"issuesStatus",align:"left",isTemplate:!0},{id:"5",label:"创建时间 ",prop:"createTime",align:"left"}],data:[]},he={issuesName:[{required:!0,message:"请输入",trigger:"blur"}]},pe={hasOperation:!1,hasSelect:!0,hasOnlySelect:!1,pagination:!1,height:200,hasSelectArray:[],tr:[{id:"1",label:"设备ID",prop:"deviceId",align:"left"},{id:"2",label:"人员",prop:"userName",align:"left"}],data:[]},ge={hasOperation:!1,hasSelect:!0,hasOnlySelect:!1,pagination:!1,height:200,hasSelectArray:[],tr:[{id:"1",label:"分组名称",prop:"tagName",align:"left"}],data:[]},fe={hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,paginationTwo:!0,height:400,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"下载",Fun:"handleDownload",id:"1",type:"text",isPlain:!0,status:"default"},{label:"delete",Fun:"handleDelete",id:"2",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"资料名称",prop:"fileName",align:"left",sortable:!0},{id:"2",label:"资料类型",prop:"fileSuffix",align:"left",sortable:!0},{id:"3",label:"文件大小",prop:"fileSize",align:"left",sortable:!0,isTemplate:!0}],data:[]};function be(e){return Object(c["a"])({url:"/issues/list",method:"POST",data:e})}function ve(e){return Object(c["a"])({url:"/issues/save",method:"POST",data:e})}function _e(e){return Object(c["a"])({url:"/issues/delete",method:"POST",data:e})}function ye(e){return Object(c["a"])({url:"/issues/get/"+e,method:"get"})}function Fe(e){return Object(c["a"])({url:"/issues/getFileList",method:"POST",data:e})}function we(e){return Object(c["a"])({url:"/issues/update",method:"POST",data:e})}function Se(e){return Object(c["a"])({url:"/meetingUser/selectList/"+e,method:"get"})}function ke(e){return Object(c["a"])({url:"/tag/list",method:"POST",data:e})}function Ce(e){return Object(c["a"])({url:"/file/delete",method:"POST",data:e})}function xe(e){return Object(c["a"])({url:"/issues/updateStatus",method:"POST",data:e})}var Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DialogBox",{attrs:{dialog:e.dialog,width:"665px"},on:{submit:e.submit,close:e.clearFileList}},[a("div",{staticClass:"daloge-herder-box com-tit-m12"},[a("span",[e._v("上传文件 ")]),e._v(" "),a("span",{staticStyle:{color:"#1890FF"}},[e._v(e._s(e.uploadOk)+"个")]),e._v(",\n        "),a("span",[e._v("失败 ")]),e._v(" "),a("span",{staticStyle:{color:"#FF3B31"}},[e._v(e._s(e.uploadFail)+"个")])]),e._v(" "),a("div",{staticClass:"daloge-herder-box2"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{multiple:"",action:e.action,headers:e.myHeaders,"http-request":e.customUpload,"on-progress":e.handleProgress,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-error":e.handlError,"file-list":e.fileList,"auto-upload":!1,"on-change":e.onChange}},[a("el-button",{attrs:{slot:"trigger",plain:""},slot:"trigger"},[e._v("导入资料")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitUpload}},[e._v("开始上传")])],1)],1),e._v(" "),a("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{onHandleSelectionChange:e.handleSelectionChange,handleDelete:e.handleDelete},scopedSlots:e._u([{key:"size",fn:function(t){return[e._v("\n            "+e._s(e.getfilesize(t.obj.row.size))+"\n        ")]}},{key:"status",fn:function(t){return[a("span",["success"===t.obj.row.status||"fail"===t.obj.row.status?a("span",{staticClass:"spot2",class:["success"===t.obj.row.status?"security":"fail"===t.obj.row.status?"dangerous":""]}):e._e(),e._v("\n                "+e._s("ready"===t.obj.row.status?"等待上传":"uploading"===t.obj.row.status?"正在上传":"success"===t.obj.row.status?"上传成功":"上传失败")+"\n                "+e._s("uploading"===t.obj.row.status?" "+t.obj.row.percentage+"%":"")+"\n            ")])]}}])},[e._v(" "),e._v(" "),a("div",{attrs:{slot:"hasEmpty"},slot:"hasEmpty"},[a("i",{staticClass:"el-icon-upload",staticStyle:{"font-size":"194px",color:"rgba(67,66,93,0.1)"}}),e._v(" "),a("div",{staticStyle:{"font-size":"18px",color:"rgba(51,51,51,0.5)"}},[e._v("你还没有导入资料")])])])],1)},De=[],Ie=(a("e204"),{hasSelect:!1,hasOperation:!0,pagination:!1,paginationTwo:!0,clickIsSelect:!0,hasOnlySelect:!1,hasEmptyBox:!0,height:387,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"移除",Fun:"handleDelete",id:"1",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"文件名",prop:"name",align:"left"},{id:"2",label:"大小",prop:"size",align:"left",isTemplate:!0},{id:"3",label:"状态",prop:"status",align:"left",isTemplate:!0}],data:[]});a("70da"),a("f548"),a("2b45"),a("d886");function Te(e){if(!e)return"0";var t=1024;return e<t?e+"B":e<Math.pow(t,2)?(e/t).toFixed(2)+"K":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+"M":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+"G":(e/Math.pow(t,4)).toFixed(2)+"T"}var $e={name:"index",data:function(){return{tableOption:Ie,action:"/paperless",myHeaders:{token:Object(R["d"])()},fileList:[],uploadOk:0,uploadFail:0,loading:!1}},props:{main:Object,dialog:{type:Object,default:{dialogVisible:!1,title:"上传资料"}}},watch:{uploadOk:{handler:function(e){e+this.uploadFail===this.tableOption.data.length&&(this.loading=!1)}},uploadFail:{handler:function(e){e+this.uploadOk===this.tableOption.data.length&&(this.loading=!1)}}},methods:{handleSelectionChange:function(){},handleDelete:function(e,t){if(this.loading)this.$alertBox("uploadingCannotBeDeleted");else{var a=this.$refs.upload.uploadFiles,i=a.findIndex((function(e){return e.uid===t.uid}));a.splice(i,1)}},submit:function(){this.$emit("submit")},customUpload:function(e){var t=this,a=this;this.loading=!0,this.tableOption.data.filter((function(i,l){if(i.uid===e.file.uid){var n=new FormData;n.append("file",e.file),n.append("fileType",t.main.fileType),n.append("typeId",t.main.typeId),i.status="uploading",Object(c["a"])({url:"/file/upload",method:"post",data:n,onUploadProgress:function(e){var t=e.loaded/e.total*100|0;i.percentage=t},timeout:18e5}).then((function(e){i.status="success",a.uploadOk+=1})).catch((function(e){i.status="fail",a.uploadFail+=1}))}}))},onChange:function(e,t){this.loading=!1,this.tableOption.data=t},submitUpload:function(){this.tableOption.data.length>0?this.$refs.upload.submit():this.$alertBox("pleaseImportData")},clearFileList:function(){this.$refs.upload.clearFiles(),this.tableOption.data=[],this.uploadOk=0,this.uploadFail=0,this.fileList=[]},handlePreview:function(){},handleProgress:function(e,t,a){},handleRemove:function(){},handleSuccess:function(e,t,a){},handlError:function(e,t,a){},getfilesize:function(e){return Te(e)}}},je=$e,Ae=(a("755b"),a("a33f"),Object(k["a"])(je,Oe,De,!1,null,"39899b16",null)),Ne=Ae.exports,Pe=(a("83d6"),{name:"index",components:{uploadTable:Ne},data:function(){return{where:{pageIndex:0,pageSize:0,name:"",meetingId:""},tableOption:me,tableOption2:pe,tableOption3:fe,tableOption4:ge,dialog:{dialogVisible:!1,title:""},dialog2:{dialogVisible:!1,title:"会议资料"},dialog3:{dialogVisible:!1,title:""},rules:he,ruleForm:{issuesGeneral:"",issuesName:"",issuesStatus:0,meetingId:0,relationType:0,sort:0,userIds:[],userTagIds:[]},typeId:"",downloadArr:[],getById:"",selectionArr:[],where3:{id:"",orderBy:""}}},methods:{addList:function(){this.clear(),this.dialog={dialogVisible:!0,title:"新增议题"}},chooseMeetId:function(e){this.where.meetingId=e,this.fetchData(),this.fetchData2(e),this.fetchData4(e)},pagination:function(e){this.where.pageSize=e.pageSize,this.where.pageIndex=e.pageIndex,this.fetchData()},fetchData:function(){var e=this;""!==this.where.meetingId?be(this.where).then((function(t){e.tableOption.pageTotal=t.data.page.total,e.tableOption.data=t.data.list})):this.tableOption.data=[]},handleEdit:function(e,t){var a=this;this.clear(),ye(t.id).then((function(e){a.ruleForm=e.data,null!==e.data.userIds?a.tableOption2.hasSelectArray=e.data.userIds:a.tableOption2.hasSelectArray=[],null!==e.data.userTagIds?a.tableOption4.hasSelectArray=e.data.userTagIds:a.tableOption4.hasSelectArray=[],a.dialog={dialogVisible:!0,title:"编辑议题"}}))},handleDelete:function(e,t){this.isDelete([t.id])},deleteMore:function(){if(0!==this.selectionArr.length){var e=this.selectionArr.map((function(e){return e.id}));this.isDelete(e)}else this.$alertBox("pleaseChoose")},isDelete:function(e){var t=this;this.$confirmBox("delete").then((function(){_e({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))}))},handleSelectionChange:function(e){this.selectionArr=e},submit:function(){var e=this;""!==this.where.meetingId?this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.ruleForm.meetingId=e.where.meetingId,"新增议题"===e.dialog.title?ve(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()})):we(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()}))})):this.$alertBox("pleaseAddOrStartTheMeeting")},clear:function(){this.ruleForm={issuesGeneral:"",issuesName:"",issuesStatus:0,meetingId:0,relationType:0,sort:0,userIds:[],userTagIds:[]},void 0!=this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),void 0!=this.$refs.table2&&this.$refs.table2.clearSelections(),void 0!=this.$refs.table4&&this.$refs.table4.clearSelections()},handleUpload:function(e,t){this.typeId=t.id,this.dialog3={dialogVisible:!0,title:"上传资料"}},rowClick:function(e){this.getById=e.id,this.fetchList3(e.id)},fetchData2:function(e){var t=this;e&&Se(e).then((function(e){t.tableOption2.data=e.data}))},handleSelectionChange2:function(e){this.ruleForm.userIds=e.map((function(e){return e.id}))},fetchData4:function(e){var t=this;e&&ke({name:"",pageFlag:0,meetingId:e}).then((function(e){t.tableOption4.data=e.data.list}))},handleSelectionChange4:function(e){this.ruleForm.userTagIds=e.map((function(e){return e.id}))},onSortChange:function(e){this.where3.orderBy="ascending"===e.order?e.prop+" asc":"descending"===e.order?e.prop+" desc":"",this.fetchList3(this.where3.id)},fetchList3:function(e){var t=this;this.where3.id=e,Fe(this.where3).then((function(e){t.tableOption3.data=e.data.fileList,t.dialog2.dialogVisible=!0}))},handleSelectionChange3:function(e){this.downloadArr=e},handleDelete3:function(e,t){this.isDelete3([t.id])},deleteMore3:function(){if(0!==this.downloadArr.length){var e=this.downloadArr.map((function(e){return e.id}));this.isDelete3(e)}else this.$alertBox("pleaseChoose")},isDelete3:function(e){var t=this;this.$confirmBox("delete").then((function(){Ce({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchList3(t.getById)}))}))},submit3:function(){this.getById="",this.dialog2.dialogVisible=!1,this.fetchData()},submit4:function(){this.dialog3={dialogVisible:!1,title:"上传资料"},this.typeId="",this.fetchData()},moreDownload:function(){if(0!==this.downloadArr.length){var e=this,t=this.downloadArr,a=0;i()}else this.$alert("请勾选列表中","提示",{confirmButtonText:"确定",type:"warning"});function i(){var l=setTimeout(i,500);t[a]&&e.handleDownload(a,t[a]),a++,a>t.length&&(clearTimeout(l),l=null)}},handleDownload:function(e,t){var a=document.createElement("a");a.href="/paperless/file/download?fileType=9&typeId="+t.id,a.click()},changeDoing:function(e){var t=this,a={id:e.id,status:0===e.issuesStatus?1:0};xe(a).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))},closeDownLoad:function(){this.$refs.table3.clearSelections()},getfilesize:function(e){return Te(e)}}}),Me=Pe,Ee=(a("242d"),Object(k["a"])(Me,de,ue,!1,null,"0a5eac31",null)),Be=Ee.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"temporaryPlay-seach bg-w"},[a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("文件名称: ")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.name,callback:function(t){e.$set(e.where,"name",t)},expression:"where.name"}})],1)]),e._v(" "),a("span",{staticClass:"in-block"},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:""},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.refresh")))])],1)])]),e._v(" "),a("div",{staticClass:"temporaryPlay-table bg-w mt-8"},[a("div",{staticClass:"clear-float"},[a("div",{staticClass:" float-l"},[a("chooseMeet",{attrs:{showText:!1},on:{chooseMeetId:e.chooseMeetId}})],1),e._v(" "),a("div",{staticClass:"float-r"},[a("el-button",{attrs:{plain:""},on:{click:e.deleteMore}},[e._v("删除资料")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addList}},[e._v("上传资料")])],1)]),e._v(" "),a("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{fetchData:e.pagination,onHandleSelectionChange:e.handleSelectionChange,handleDownload:e.handleDownload,handleDelete:e.handleDelete},scopedSlots:e._u([{key:"fileSize",fn:function(t){return[e._v("\n                "+e._s(e.getfilesize(t.obj.row.fileSize))+"\n            ")]}}])})],1),e._v(" "),a("uploadTable",{attrs:{dialog:e.dialog,main:{fileType:"shareFile",typeId:e.where.typeId}},on:{submit:e.submit}})],1)},Le=[],ze={hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,pagination:!0,height:539,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"下载",Fun:"handleDownload",id:"1",type:"text",isPlain:!0,status:"default"},{label:"delete",Fun:"handleDelete",id:"2",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"文件名称",prop:"fileName",align:"left"},{id:"2",label:"文件类型",prop:"fileSuffix",align:"left"},{id:"3",label:"文件大小",prop:"fileSize",align:"left",isTemplate:!0},{id:"4",label:"上传者",prop:"uploadUserName",align:"left"},{id:"5",label:"上传时间 ",prop:"createTime",align:"left"}],data:[]};function Re(e){return Object(c["a"])({url:"/file/list",method:"POST",data:e})}function Ue(e){return Object(c["a"])({url:"/file/delete",method:"POST",data:e})}var He={name:"index",components:{uploadTable:Ne},data:function(){return{where:{pageIndex:0,pageSize:0,name:"",typeId:"",fileType:"shareFile"},tableOption:ze,dialog:{dialogVisible:!1,title:""},rules:void 0,ruleForm:{},selectionArr:[]}},methods:{chooseMeetId:function(e){this.where.typeId=e,this.fetchData()},pagination:function(e){this.where.pageSize=e.pageSize,this.where.pageIndex=e.pageIndex,this.fetchData()},fetchData:function(){var e=this;""!==this.where.typeId?Re(this.where).then((function(t){e.tableOption.pageTotal=t.data.page.total,e.tableOption.data=t.data.list})):this.tableOption.data=[]},handleDelete:function(e,t){this.isDelete([t.id])},deleteMore:function(){if(0!==this.selectionArr.length){var e=this.selectionArr.map((function(e){return e.id}));this.isDelete(e)}else this.$alertBox("pleaseChoose")},isDelete:function(e){var t=this;this.$confirmBox("delete").then((function(){Ue({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))}))},handleSelectionChange:function(e){this.selectionArr=e},addList:function(){""!==this.where.typeId?this.dialog={dialogVisible:!0,title:"上传资料"}:this.$alertBox("pleaseAddOrStartTheMeeting")},submit:function(){this.dialog={dialogVisible:!1,title:"上传资料"},this.fetchData()},moreDownload:function(){if(0!==this.downloadArr.length){var e=this,t=this.downloadArr,a=0;i()}else this.$alert("请勾选列表中","提示",{confirmButtonText:"确定",type:"warning"});function i(){var l=setTimeout(i,500);t[a]&&e.handleDownload(a,t[a]),a++,a>t.length&&(clearTimeout(l),l=null)}},handleDownload:function(e,t){var a=document.createElement("a");a.href="/paperless/file/download?fileType=9&typeId="+t.id,a.click()},getfilesize:function(e){return Te(e)}}},qe=He,Ge=Object(k["a"])(qe,Ve,Le,!1,null,"9238e09e",null),We=Ge.exports,Je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[i("div",{staticClass:"temporaryPlay-seach bg-w"},[i("span",{staticClass:"in-block  mr-16  "},[i("span",{staticClass:"com-tit-m12"},[e._v("投票名称: ")]),e._v(" "),i("span",{staticClass:"w-157 in-block"},[i("el-input",{attrs:{clearable:""},model:{value:e.where.name,callback:function(t){e.$set(e.where,"name",t)},expression:"where.name"}})],1)]),e._v(" "),i("span",{staticClass:"in-block"},[i("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(t){return e.fetchData(e.where)}}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-refresh",plain:""},on:{click:function(t){return e.fetchData(e.where)}}},[e._v(e._s(e.$t("table.refresh")))])],1)])]),e._v(" "),i("div",{staticClass:"temporaryPlay-table bg-w mt-8"},[i("div",{staticClass:"clear-float"},[i("div",{staticClass:" float-l"},[i("chooseMeet",{on:{chooseMeetId:e.chooseMeetId}})],1),e._v(" "),i("div",{staticClass:"float-r"},[i("el-button",{attrs:{plain:""},on:{click:function(t){return e.votStatus(1)}}},[e._v("开启投票")]),e._v(" "),i("el-button",{attrs:{plain:""},on:{click:function(t){return e.votStatus(2)}}},[e._v("结束投票")]),e._v(" "),i("el-button",{attrs:{plain:""},on:{click:e.deleteMore}},[e._v("删除投票")]),e._v(" "),i("el-button",{attrs:{plain:""},on:{click:e.shwoVote}},[e._v("投票统计")]),e._v(" "),i("el-button",{attrs:{plain:""},on:{click:e.exportList}},[e._v("导出投票")]),e._v(" "),i("el-button",{attrs:{plain:""},on:{click:e.results}},[e._v("显示投票结果")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addList}},[e._v("新增投票")])],1)]),e._v(" "),i("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{onSortChange:e.onSortChange,fetchData:e.pagination,onHandleSelectionChange:e.handleSelectionChange,handleEdit:e.handleEdit,handleReset:e.handleReset,handleDelete:e.handleDelete},scopedSlots:e._u([{key:"voteStatus",fn:function(t){return[i("div",{staticClass:"spot2",class:0===t.obj.row.voteStatus?"over":1===t.obj.row.voteStatus?"suss":"security"}),e._v("\n                    "+e._s(0===t.obj.row.voteStatus?"未启用":1===t.obj.row.voteStatus?"进行中 ":"已结束 ")+"\n                ")]}},{key:"voteType",fn:function(t){return[i("span",[e._v(e._s(0===t.obj.row.voteType?"表决":"自定义"))])]}},{key:"selectType",fn:function(t){return[i("span",[e._v(e._s(0===t.obj.row.selectType?"单选":"多选"))])]}},{key:"realTimeFlag",fn:function(t){return[i("span",[e._v(e._s(0===t.obj.row.realTimeFlag?"否":"是"))])]}},{key:"realNameFlag",fn:function(t){return[i("span",[e._v(e._s(0===t.obj.row.realNameFlag?"否":"是"))])]}}])})],1),e._v(" "),i("DialogBox",{attrs:{dialog:e.dialog,width:"733px"},on:{submit:e.submit}},[i("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"85px"}},[i("span",{staticClass:"in-block"},[i("el-form-item",{attrs:{label:"投票名称: ",prop:"voteName"}},[i("div",{staticClass:"w-150"},[i("el-input",{attrs:{readonly:1===e.ruleForm.voteStatus},model:{value:e.ruleForm.voteName,callback:function(t){e.$set(e.ruleForm,"voteName",t)},expression:"ruleForm.voteName"}})],1)])],1),e._v(" "),i("span",{staticClass:"in-block"},[i("el-form-item",{attrs:{label:"投票时间: "}},[i("div",{staticClass:"w-150 in-block"},[i("el-input-number",{attrs:{"controls-position":"right",min:30,max:3600},model:{value:e.ruleForm.voteTime,callback:function(t){e.$set(e.ruleForm,"voteTime",t)},expression:"ruleForm.voteTime"}})],1),e._v(" "),i("span",[e._v("单位:秒")])])],1),e._v(" "),i("span",{staticClass:"in-block power-radio mr-50",staticStyle:{width:"285px"}},[i("el-form-item",{attrs:{label:"投票权限","label-width":"80px"}},[i("el-radio-group",{model:{value:e.ruleForm.relationType,callback:function(t){e.$set(e.ruleForm,"relationType",t)},expression:"ruleForm.relationType"}},[i("el-radio",{attrs:{label:0}},[e._v("按选择人员")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("按人员分组")])],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.ruleForm.relationType,expression:"ruleForm.relationType === 0"}],staticClass:"mt-10"},[i("tl-table",{ref:"table2",attrs:{table:e.tableOption2},on:{onHandleSelectionChange:e.handleSelectionChange2}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.ruleForm.relationType,expression:"ruleForm.relationType === 1"}],staticClass:"mt-10"},[i("tl-table",{ref:"table3",attrs:{table:e.tableOption3},on:{onHandleSelectionChange:e.handleSelectionChange3}})],1)],1),e._v(" "),i("span",{staticClass:"in-block",staticStyle:{width:"285px"}},[i("el-form-item",{attrs:{label:"投票类型","label-width":"90px"}},[i("el-radio-group",{model:{value:e.ruleForm.voteType,callback:function(t){e.$set(e.ruleForm,"voteType",t)},expression:"ruleForm.voteType"}},[i("el-radio",{attrs:{label:0}},[e._v("表决")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("自定义")])],1)],1),e._v(" "),i("div",{staticClass:"table-box"},[i("div",{staticClass:"table"},[i("div",{staticClass:"table-cell"},[e._v("投票选项")]),e._v(" "),i("div",{staticClass:"table-cell"},[e._v("操作")])]),e._v(" "),i("div",{staticClass:"text-center mt-16"},[i("span",{staticClass:"in-block"},[i("el-input",{model:{value:e.votingOptions,callback:function(t){e.votingOptions=t},expression:"votingOptions"}})],1),e._v(" "),i("span",{staticClass:"in-block"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addVoting}},[e._v("新增")])],1)]),e._v(" "),i("div",{staticClass:"table-main"},e._l(e.votingOptionsArr,(function(t,a){return i("div",{key:a,staticClass:"table"},[i("div",{staticClass:"table-cell2"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"table-cell2"},[i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.removeVotingOptions(a)}}},[e._v("删除")])],1)])})),0)])],1),e._v(" "),i("div",{staticClass:"mt-40"},[i("span",{staticClass:"in-block"},[i("el-form-item",{attrs:{label:"选择类型","label-width":"95px"}},[i("el-radio-group",{model:{value:e.ruleForm.selectType,callback:function(t){e.$set(e.ruleForm,"selectType",t)},expression:"ruleForm.selectType"}},[i("el-radio",{attrs:{label:0}},[e._v("单选")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("多选")])],1)],1)],1),e._v(" "),i("span",{staticClass:"in-block"},[i("el-form-item",{attrs:{label:"是否实时","label-width":"95px"}},[i("el-radio-group",{model:{value:e.ruleForm.realTimeFlag,callback:function(t){e.$set(e.ruleForm,"realTimeFlag",t)},expression:"ruleForm.realTimeFlag"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1)],1),e._v(" "),i("span",{staticClass:"in-block"},[i("el-form-item",{attrs:{label:"是否实名","label-width":"95px"}},[i("el-radio-group",{model:{value:e.ruleForm.realNameFlag,callback:function(t){e.$set(e.ruleForm,"realNameFlag",t)},expression:"ruleForm.realNameFlag"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1)],1)])])],1),e._v(" "),i("DialogBox",{attrs:{dialog:e.dialog2,width:"949px"},on:{submit:function(t){e.dialog2.dialogVisible=!1}}},[i("div",{staticClass:"clear-float"},[i("div",{staticClass:"float-l chart"},[i("ve-ring",{attrs:{data:e.chartData,extend:e.chartExtend,title:e.chartTitle}}),e._v(" "),i("div",{staticClass:"castNum"},[e._v("已投 "+e._s(e.alreadyCast)+" 人 未投 "+e._s(e.notCast)+" 人")])],1),e._v(" "),i("div",{staticClass:"float-r castBox"},[1===e.realNameFlag?i("tl-table",{attrs:{table:e.tableOption4},on:{fetchData:e.fetchData}}):e._e(),e._v(" "),0===e.realNameFlag?i("div",{staticClass:"anonymous bg-w"},[i("img",{attrs:{src:a("6b56"),alt:""}}),e._v(" "),i("div",{staticClass:"mt-40"},[e._v("该投票属于匿名，无法查看投票人")])]):e._e()],1)])]),e._v(" "),i("DialogBox",{attrs:{dialog:e.dialog3,width:"411px"},on:{submit:e.submit3}},[i("div",{staticClass:"radio-box in-block"},[i("el-radio",{attrs:{label:"1"},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem("1")}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("同步大屏")]),e._v(" "),i("el-radio",{attrs:{label:"2"},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem("2")}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("仅投放大屏")])],1),e._v(" "),i("div",{staticClass:"clinet mt-30"},[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate1},on:{change:e.handleCheckAllChange1},model:{value:e.checkAll1,callback:function(t){e.checkAll1=t},expression:"checkAll1"}},[e._v("全选")]),e._v(" "),i("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange1},model:{value:e.checkedArr1,callback:function(t){e.checkedArr1=t},expression:"checkedArr1"}},e._l(e.streamMediaArr,(function(t){return i("el-checkbox",{key:t.deviceId,attrs:{label:t.deviceId}},[e._v(e._s(t.name))])})),1)],1)])],1)},Ke=[],Ze=(a("163d"),a("e697"),{hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,pagination:!0,height:539,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"edit",Fun:"handleEdit",id:"1",type:"text",isPlain:!0,status:"default"},{label:"重置",Fun:"handleReset",id:"2",type:"text",isPlain:!0,status:"default"},{label:"delete",Fun:"handleDelete",id:"3",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"投票名称",prop:"voteName",align:"left"},{id:"2",label:"会议室名称",prop:"meetingName",align:"left"},{id:"3",label:"启用状态",prop:"voteStatus",align:"left",isTemplate:!0},{id:"4",label:"投票类型",prop:"voteType",align:"left",isTemplate:!0},{id:"5",label:"选择类型",prop:"selectType",align:"left",isTemplate:!0},{id:"6",label:"投票时间",prop:"voteTime",align:"left"},{id:"7",label:"是否实时",prop:"realTimeFlag",align:"left",isTemplate:!0},{id:"8",label:"是否实名",prop:"realNameFlag",align:"left",isTemplate:!0}],data:[]}),Qe={hasOperation:!1,hasSelect:!0,hasOnlySelect:!1,pagination:!1,height:234,hasSelectArray:[],tr:[{id:"1",label:"设备ID",prop:"deviceId",align:"left"},{id:"2",label:"人员",prop:"userName",align:"left"}],data:[]},Xe={hasSelectArray:[],hasOperation:!1,hasSelect:!0,hasOnlySelect:!1,pagination:!1,height:234,tr:[{id:"1",label:"分组名称",prop:"tagName",align:"left"}],data:[]},Ye={hasOperation:!1,hasSelect:!1,hasOnlySelect:!1,pagination:!1,height:435,tr:[{id:"1",label:"投票选项",prop:"voteMenuName",align:"left"},{id:"2",label:"投票人",prop:"userName",align:"left"}],data:[]},et={voteName:[{required:!0,message:"请输入",trigger:"blur"}]};function tt(e){return Object(c["a"])({url:"/vote/list",method:"POST",data:e})}function at(e){return Object(c["a"])({url:"/vote/save",method:"POST",data:e})}function it(e){return Object(c["a"])({url:"/vote/delete",method:"POST",data:e})}function lt(e){return Object(c["a"])({url:"/vote/get/"+e,method:"get"})}function nt(e){return Object(c["a"])({url:"/vote/update",method:"POST",data:e})}function st(e){return Object(c["a"])({url:"/meetingUser/selectList/"+e,method:"get"})}function ot(e){return Object(c["a"])({url:"/tag/list",method:"POST",data:e})}function rt(){return Object(c["a"])({url:"/vote/voteMenuList",method:"get"})}function ct(e){return Object(c["a"])({url:"/vote/statistics/"+e,method:"get"})}function dt(e){return Object(c["a"])({url:"/vote/saveVoteMenu",method:"POST",data:e})}function ut(e){return Object(c["a"])({url:"/vote/updateStatus",method:"POST",data:e})}function mt(e){return Object(c["a"])({url:"/client/streamMedia/"+e,method:"get"})}a("4569"),a("2389");var ht={name:"index",data:function(){var e=this;return{where:{pageIndex:0,pageSize:0,name:"",meetingId:"",orderBy:""},chartTitle:{text:"投票统计",left:111,top:29,textStyle:{fontSize:20},itemGap:23},chartData:{columns:["状态","人数"],rows:[{状态:"未签到",人数:20},{状态:"已签到",人数:80}],total:0},chartExtend:{series:{top:37,center:[153,226],radius:["65%","70%"],label:{normal:{show:!0,position:"center",formatter:function(){return["{a|"+e.chartData.total+"人}","{x|总人数}"].join("\n")},rich:{a:{color:"#171725",fontSize:35,fontWeight:400},x:{color:"#696974",fontSize:14}}}}},legend:{type:"scroll",orient:"vertical",right:10,top:20,icon:"circle",itemWidth:10,itemHeight:10,itemGap:30,formatter:function(t){var a="";return e.chartData&&(a=e.chartData.rows.find((function(e){return e["状态"]===t}))["人数"]),t+" "+a+"人"},textStyle:{fontSize:16,color:"#44444F",marginLeft:10}},color:[]},tableOption:Ze,tableOption2:Qe,tableOption3:Xe,tableOption4:Ye,dialog:{dialogVisible:!1,title:""},dialog2:{dialogVisible:!1,title:"投票统计"},dialog3:{dialogVisible:!1,title:"显示投票结果"},rules:et,ruleForm:{voteName:"",voteTime:"",voteType:0,selectType:0,realTimeFlag:0,realNameFlag:0,relationType:0,userIds:[],userTagIds:[],menuIds:[]},notCast:0,alreadyCast:0,votingOptions:"",votingOptionsArr:[],realNameFlag:0,selectionArr:[],radio:"",streamMediaArr:[],checkAll1:!1,checkedArr1:[],isIndeterminate1:!0}},methods:{addList:function(){this.clear(),this.voteMenuList(),this.dialog={dialogVisible:!0,title:"新增投票"}},chooseMeetId:function(e){this.where.meetingId=e,this.fetchData(),this.fetchDataTwo(e),this.fetchDataThr(e)},pagination:function(e){this.where.pageSize=e.pageSize,this.where.pageIndex=e.pageIndex,this.fetchData()},fetchData:function(){var e=this;""!==this.where.meetingId?tt(this.where).then((function(t){e.tableOption.pageTotal=t.data.page.total,e.tableOption.data=t.data.list})):this.tableOption.data=[]},fetchDataTwo:function(e){var t=this;e&&st(e).then((function(e){t.tableOption2.data=e.data}))},fetchDataThr:function(e){var t=this;e&&ot({name:"",pageFlag:0,meetingId:e}).then((function(e){t.tableOption3.data=e.data.list}))},handleReset:function(e,t){this.updateStatus(t.id,0)},votStatus:function(e){1===this.selectionArr.length?this.updateStatus(this.selectionArr[0].id,e):this.$alertBox("pleaseChoose")},updateStatus:function(e,t){var a=this;ut({id:e,status:t}).then((function(e){a.$message({message:e.msg,type:"success",duration:1e3}),a.fetchData()}))},handleEdit:function(e,t){var a=this;this.clear(),lt(t.id).then((function(e){a.ruleForm=e.data,null!==e.data.userIds?a.tableOption2.hasSelectArray=e.data.userIds:a.tableOption2.hasSelectArray=[],null!==e.data.userTagIds?a.tableOption3.hasSelectArray=e.data.userTagIds:a.tableOption3.hasSelectArray=[],a.votingOptionsArr=e.data.menuList,a.dialog={dialogVisible:!0,title:"编辑投票"}}))},handleDelete:function(e,t){this.isDelete([t.id])},deleteMore:function(){if(0!==this.selectionArr.length){var e=this.selectionArr.map((function(e){return e.id}));this.isDelete(e)}else this.$alertBox("pleaseChoose")},isDelete:function(e){var t=this;this.$confirmBox("delete").then((function(){it({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))}))},handleSelectionChange:function(e){this.selectionArr=e},handleSelectionChange2:function(e){this.ruleForm.userIds=e.map((function(e){return e.id}))},handleSelectionChange3:function(e){this.ruleForm.userTagIds=e.map((function(e){return e.id}))},submit:function(){var e=this;""!==this.where.meetingId?this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.ruleForm.meetingId=e.where.meetingId,e.ruleForm.menuIds=e.votingOptionsArr.map((function(e){return e.id})),"新增投票"===e.dialog.title?at(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()})):nt(e.ruleForm).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.dialog.dialogVisible=!1,e.fetchData()}))})):this.$alertBox("pleaseAddOrStartTheMeeting")},clear:function(){this.ruleForm={voteName:"",voteTime:"",voteType:0,selectType:0,realTimeFlag:0,realNameFlag:0,relationType:0,userIds:[],userTagIds:[],menuIds:[]},this.votingOptionsArr=[],void 0!=this.$refs.table2&&this.$refs.table2.clearSelections(),void 0!=this.$refs.table3&&this.$refs.table3.clearSelections()},voteMenuList:function(){var e=this;rt().then((function(t){e.votingOptionsArr=t.data}))},addVoting:function(){var e=this;""!==this.votingOptions&&dt({meetingId:this.where.meetingId,name:this.votingOptions,type:this.ruleForm.voteType}).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),e.votingOptionsArr.push(t.data),e.votingOptions=""}))},removeVotingOptions:function(e){this.votingOptionsArr.splice(e,1)},exportList:function(){0!==this.selectionArr.length?this.selectionArr.map((function(e){Object(le["a"])("/vote/exportStatistics/"+e.id,e.voteName+"投票列表.pdf")})):this.$alertBox("pleaseChoose")},shwoVote:function(){var e=this;1===this.selectionArr.length?ct(this.selectionArr[0].id).then((function(t){e.notCast=t.data.unVoteUserCount,e.realNameFlag=t.data.realNameFlag,e.alreadyCast=t.data.voteUserCount,e.chartData.total=t.data.userTotal,e.tableOption4.data=t.data.voteUserList,e.chartExtend.color=t.data.voteMenuList.map((function(e){return e.color})),e.chartData.rows=t.data.voteMenuList.map((function(e){return{状态:e.voteMenuName,人数:e.voteCount}})),e.dialog2.dialogVisible=!0})):this.$alertBox("pleaseChoose")},onSortChange:function(e){this.where.orderBy="ascending"===e.order?e.prop+" asc":"descending"===e.order?e.prop+" desc":"",this.fetchData()},clickitem:function(e){e===this.radio?this.radio="":this.radio=e},handleCheckAllChange1:function(e){this.checkedArr1=e?this.streamMediaIds:[],this.isIndeterminate1=!1},handleCheckedCitiesChange1:function(e){var t=e.length;this.checkAll1=t===this.streamMediaArr.length,this.isIndeterminate1=t>0&&t<this.streamMediaArr.length},results:function(){var e=this;1===this.selectionArr.length?(mt(this.where.meetingId).then((function(t){e.streamMediaArr=t.data,e.streamMediaIds=t.data.map((function(e){return e.deviceId}))})),this.dialog3.dialogVisible=!0):this.$alertBox("pleaseCheckOneOfTheLists")},submit3:function(){this.$websocket.dispatch("WEBSOCKET_SEND",{method:"pollResults",jsonData:{screen:Number(this.radio),streamId:this.checkedArr1,local:0,voteId:this.selectionArr[0].id,meetingId:this.where.meetingId,typeId:6}}),this.radio="",this.checkedArr1=[],this.checkAll1=!1,this.isIndeterminate1=!0,this.dialog3.dialogVisible=!1}}},pt=ht,gt=(a("abe8"),a("4e03"),Object(k["a"])(pt,Je,Ke,!1,null,"8180ba12",null)),ft=gt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"temporaryPlay-seach bg-w"},[a("span",{staticClass:"in-block  mr-16  "},[a("span",{staticClass:"com-tit-m12"},[e._v("标语名称: ")]),e._v(" "),a("span",{staticClass:"w-157 in-block"},[a("el-input",{attrs:{clearable:""},model:{value:e.where.name,callback:function(t){e.$set(e.where,"name",t)},expression:"where.name"}})],1)]),e._v(" "),a("span",{staticClass:"in-block"},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:""},on:{click:e.fetchData}},[e._v(e._s(e.$t("table.refresh")))])],1)])]),e._v(" "),a("div",{staticClass:"temporaryPlay-table bg-w mt-8"},[a("div",{staticClass:"clear-float"},[e._m(0),e._v(" "),a("div",{staticClass:"float-r"},[a("el-button",{attrs:{plain:""},on:{click:e.deleteMore}},[e._v("删除标语")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addList}},[e._v("新增标语")])],1)]),e._v(" "),a("tl-table",{staticClass:"mt-10",attrs:{table:e.tableOption},on:{fetchData:e.pagination,onHandleSelectionChange:e.handleSelectionChange,handleEdit:e.handleEdit,handleDelete:e.handleDelete}})],1),e._v(" "),a("DialogBox",{attrs:{dialog:e.dialog,width:"634px"},on:{submit:e.submit,close:e.restoreDefault}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[a("span",{staticClass:"in-block"},[a("el-form-item",{attrs:{label:"标语名称: ","label-width":"90px",prop:"meetingSloganName"}},[a("div",{staticClass:"w-150"},[a("el-input",{model:{value:e.ruleForm.meetingSloganName,callback:function(t){e.$set(e.ruleForm,"meetingSloganName",t)},expression:"ruleForm.meetingSloganName"}})],1)])],1)]),e._v(" "),e.restore?a("cardEdit",{ref:"cardEdit",attrs:{cardWidth:"573px",cardHeight:"334px",dataPlate:e.ruleForm.dataPlate,bgSrc:e.ruleForm.background},on:{restoreDefault:e.restoreDefault}}):e._e()],1)],1)},vt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:" float-l"},[a("span",{staticClass:"com-tit-m1"},[e._v("会议标语: ")])])}],_t={hasOperation:!0,hasSelect:!0,hasOnlySelect:!1,pagination:!0,height:539,operation:{label:"操作",width:"",className:"",align:"left",data:[{label:"edit",Fun:"handleEdit",id:"1",type:"text",isPlain:!0,status:"default"},{label:"delete",Fun:"handleDelete",id:"2",type:"text",isPlain:!0,status:"default"}]},tr:[{id:"1",label:"标语名称",prop:"meetingSloganName",align:"left"}],data:[]},yt={meetingSloganName:[{required:!0,message:"请输入",trigger:"blur"}]};function Ft(e){return Object(c["a"])({url:"/meetingSlogan/list",method:"POST",data:e})}function wt(e){return Object(c["a"])({url:"/meetingSlogan/save",method:"POST",data:e})}function St(e){return Object(c["a"])({url:"/meetingSlogan/delete",method:"POST",data:e})}function kt(e){return Object(c["a"])({url:"/meetingSlogan/get/"+e,method:"get"})}function Ct(e){return Object(c["a"])({url:"/meetingSlogan/update",method:"POST",data:e})}function xt(e){return Object(c["a"])({url:"/file/upload",method:"POST",data:e})}var Ot=a("9d46"),Dt={name:"index",components:{cardEdit:Ot["a"]},data:function(){return{restore:!0,where:{pageIndex:0,pageSize:0,name:""},tableOption:_t,dialog:{dialogVisible:!1,title:""},rules:yt,ruleForm:{meetingSloganName:"",dataPlate:[],background:"",imgPath:""},selectionArr:[]}},methods:{addList:function(){this.clear(),this.dialog={dialogVisible:!0,title:"新建标语"}},pagination:function(e){this.where.pageSize=e.pageSize,this.where.pageIndex=e.pageIndex,this.fetchData()},fetchData:function(){var e=this;Ft(this.where).then((function(t){e.tableOption.pageTotal=t.data.page.total,e.tableOption.data=t.data.list}))},handleEdit:function(e,t){var a=this;this.clear(),kt(t.id).then((function(e){a.ruleForm.dataPlate=e.data.dataPlate,a.ruleForm.background=e.data.background,a.ruleForm.id=t.id,a.ruleForm.meetingSloganName=e.data.meetingSloganName,a.ruleForm=e.data,a.dialog={dialogVisible:!0,title:"编辑标语"}}))},handleDelete:function(e,t){this.isDelete([t.id])},deleteMore:function(){if(0!==this.selectionArr.length){var e=this.selectionArr.map((function(e){return e.id}));this.isDelete(e)}else this.$alertBox("pleaseChoose")},isDelete:function(e){var t=this;this.$confirmBox("delete").then((function(){St({ids:e}).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.fetchData()}))}))},handleSelectionChange:function(e){this.selectionArr=e},upLoad:function(e){var t=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;var i=new FormData;i.append("file",e),i.append("fileType","bg"),i.append("typeId",0),xt(i).then((function(e){t.ruleForm.dataPlate=t.$refs.cardEdit.inputArr,t.ruleForm.background=t.$refs.cardEdit.background,t.ruleForm.imgPath=e.data,"新建标语"===t.dialog.title?wt(t.ruleForm).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.dialog.dialogVisible=!1,t.fetchData()})):Ct(t.ruleForm).then((function(e){t.$message({message:e.msg,type:"success",duration:1e3}),t.dialog.dialogVisible=!1,t.fetchData()}))}))}))},submit:function(){this.$refs.cardEdit.draw(),this.upLoad(this.$refs.cardEdit.urlFile)},clear:function(){this.ruleForm={meetingSloganName:"",dataPlate:[],background:"",imgPath:""},void 0!=this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},restoreDefault:function(){var e=this;this.restore=!1,this.$nextTick((function(){return e.restore=!0})),this.ruleForm.dataPlate=[{fontFamily:"微软雅黑",fontSize:"72",fontWeight:"bold",color:"#ffffff",left:67,top:117,text:"欢迎各位领导"}],this.ruleForm.background="#2678C4"}}},It=Dt,Tt=Object(k["a"])(It,bt,vt,!1,null,"6d4a979a",null),$t=Tt.exports,jt={data:function(){return{activeName:this.$route.query.routerId}},components:{meetingRoomManage:x,meetingList:W,meetingAgenda:ce,meetingMaterial:Be,sharedFile:We,voteByBallot:ft,meetingTheSlogan:$t},computed:{roles:function(){return this.$store.state.user.roles}},mounted:function(){var e=this;U["a"].$on("jump",(function(t){e.activeName=t}))},methods:{handleClick:function(e,t){this.$router.push({name:"MeetingBefore",query:{routerId:e.name}})}}},At=jt,Nt=Object(k["a"])(At,i,l,!1,null,null,null);t["default"]=Nt.exports},"6aa8":function(e,t,a){"use strict";var i=a("5068"),l=a.n(i);l.a},"6b56":function(e,t,a){e.exports=a.p+"static/img/eyse.21214b6e.png"},"755b":function(e,t,a){"use strict";var i=a("23a1"),l=a.n(i);l.a},"7ab5":function(e,t,a){},"7d55":function(e,t,a){"use strict";var i=a("fbd2"),l=a.n(i);l.a},"8d21":function(e,t,a){"use strict";var i=a("3a1e"),l=a.n(i);l.a},"99aa":function(e,t,a){},a33f:function(e,t,a){"use strict";var i=a("99aa"),l=a.n(i);l.a},abe8:function(e,t,a){"use strict";var i=a("1848"),l=a.n(i);l.a},c185:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"hasBorder",attrs:{title:e.dialog.title,visible:e.dialog.dialogVisible,width:"353px"},on:{"update:visible":function(t){return e.$set(e.dialog,"dialogVisible",t)},close:e.clear}},[a("div",{staticStyle:{"text-align":"center","margin-bottom":"20px","margin-top":"30px"}},[a("el-radio",{staticClass:"mr-10",attrs:{label:0},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("添加导入")]),e._v(" "),a("el-radio",{staticClass:"ml-10",attrs:{label:1},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("覆盖导入")])],1),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.action,headers:e.myHeaders,"auto-upload":!1,"on-change":e.onChange,"show-file-list":!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}},[a("el-button",{staticClass:"mr-5",attrs:{slot:"trigger",plain:""},slot:"trigger"},[e._v("选择文件")]),e._v(" "),a("el-button",{staticClass:"ml-5",attrs:{type:"primary",loading:e.loading},on:{click:e.submitUpload}},[e._v("开始导入")])],1)],1),e._v(" "),a("div",{staticClass:"upload-tips"},[e._v(e._s(this.file?this.file.name:""))])])},l=[],n=a("5f87"),s=a("b775"),o={name:"index",data:function(){return{radio:0,action:"/paperless",myHeaders:{token:Object(n["d"])()},file:null,loading:!1}},props:{url:String,dialog:{type:Object,default:{dialogVisible:!1,title:""}}},methods:{customUpload:function(){var e=this;if(null!==this.file){var t=new FormData;t.append("file",this.file),Object(s["a"])({url:this.url+"&type="+this.radio,method:"post",data:t}).then((function(t){e.$message({message:t.msg,type:"success",duration:1e3}),200===t.code?(e.$emit("handleAvatarSuccess"),e.dialog.dialogVisible=!1):e.$message({message:t.msg,type:"error",duration:1e3})})).catch((function(t){e.$message({message:"上传失败",type:"error",duration:1e3})}))}},submitUpload:function(){this.customUpload()},onChange:function(e){this.file=e.raw},clear:function(){this.$refs.upload.clearFiles(),this.file=[]}}},r=o,c=(a("8d21"),a("c72a"),a("e90a")),d=Object(c["a"])(r,i,l,!1,null,"03825827",null);t["a"]=d.exports},c72a:function(e,t,a){"use strict";var i=a("5bc4"),l=a.n(i);l.a},d962:function(e,t,a){},fbd2:function(e,t,a){}}]);