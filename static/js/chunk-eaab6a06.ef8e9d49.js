(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eaab6a06"],{"20c0":function(t,e,a){"use strict";var n=a("64eb"),o=a.n(n);o.a},2817:function(t,e,a){},"5a3a":function(t,e,a){"use strict";var n=a("c50b"),o=a.n(n);o.a},"64eb":function(t,e,a){},"6fa2":function(t,e,a){"use strict";var n=a("2817"),o=a.n(n);o.a},"9d46":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.restore?n("div",{staticStyle:{margin:"auto"},style:{width:t.cardWidth}},[n("div",{staticClass:"makeCard",style:[t.makeCardObject,{height:t.cardHeight}]},t._l(t.inputArr,(function(e,o){return n("div",{directives:[{name:"drag",rawName:"v-drag"}],key:o,ref:"inputBox"+o,refInFor:!0,staticClass:"input-box",style:{left:t.CoordinateArr[o].left+"px",top:t.CoordinateArr[o].top+"px"},attrs:{draggable:"false"}},[o>0?n("img",{staticClass:"closeBtn",attrs:{id:o,src:a("ed3a"),alt:""}}):t._e(),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"item.text"}],staticClass:"textarea-box",style:{color:e.color,fontSize:e.fontSize+"px",fontWeight:e.fontWeight,fontFamily:e.fontFamily,width:0===e.text.length?"50px":e.text.length*Number(e.fontSize)+"px"},attrs:{type:"text",id:o},domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}})])})),0),t._v(" "),n("div",{staticClass:"chooseBg"},[n("span",{staticClass:"in-block choose-box"},[n("span",{staticClass:"com-tit-m12"},[t._v("字体 ")]),t._v(" "),n("span",{staticClass:"w-79 in-block"},[n("el-select",{model:{value:t.inputArr[t.drayId].fontFamily,callback:function(e){t.$set(t.inputArr[t.drayId],"fontFamily",e)},expression:"inputArr[drayId].fontFamily"}},[n("el-option",{attrs:{value:"宋体"}},[n("span",{staticStyle:{"font-size":"12px"}},[t._v("宋体")])]),t._v(" "),n("el-option",{attrs:{value:"仿宋"}},[n("span",{staticStyle:{"font-size":"12px"}},[t._v("仿宋")])]),t._v(" "),n("el-option",{attrs:{value:"楷体"}},[n("span",{staticStyle:{"font-size":"12px"}},[t._v("楷体")])]),t._v(" "),n("el-option",{attrs:{value:"黑体"}},[n("span",{staticStyle:{"font-size":"12px"}},[t._v("黑体")])]),t._v(" "),n("el-option",{attrs:{value:"思源黑体"}},[n("span",{staticStyle:{"font-size":"12px"}},[t._v("思源黑体")])]),t._v(" "),n("el-option",{attrs:{value:"思源宋体"}},[n("span",{staticStyle:{"font-size":"12px"}},[t._v("思源宋体")])]),t._v(" "),n("el-option",{attrs:{value:"微软雅黑"}},[n("span",{staticStyle:{"font-size":"12px"}},[t._v("微软雅黑")])])],1)],1)]),t._v(" "),n("span",{staticClass:"in-block choose-box"},[n("span",{staticClass:"com-tit-m12"},[t._v("字号 ")]),t._v(" "),n("span",{staticClass:"w-79 in-block"},[n("el-select",{model:{value:t.inputArr[t.drayId].fontSize,callback:function(e){t.$set(t.inputArr[t.drayId],"fontSize",e)},expression:"inputArr[drayId].fontSize"}},[n("el-option",{attrs:{value:"14"}},[t._v("14")]),t._v(" "),n("el-option",{attrs:{value:"16"}},[t._v("16")]),t._v(" "),n("el-option",{attrs:{value:"18"}},[t._v("18")]),t._v(" "),n("el-option",{attrs:{value:"20"}},[t._v("20")]),t._v(" "),n("el-option",{attrs:{value:"22"}},[t._v("22")]),t._v(" "),n("el-option",{attrs:{value:"24"}},[t._v("24")]),t._v(" "),n("el-option",{attrs:{value:"26"}},[t._v("26")]),t._v(" "),n("el-option",{attrs:{value:"28"}},[t._v("28")]),t._v(" "),n("el-option",{attrs:{value:"36"}},[t._v("36")]),t._v(" "),n("el-option",{attrs:{value:"42"}},[t._v("42")]),t._v(" "),n("el-option",{attrs:{value:"48"}},[t._v("48")]),t._v(" "),n("el-option",{attrs:{value:"72"}},[t._v("72")])],1)],1)]),t._v(" "),n("span",{staticClass:"in-block choose-box"},[n("span",{staticClass:"com-tit-m12"},[t._v("字体颜色 ")]),t._v(" "),n("span",{staticClass:"w-79 in-block"},[n("theme-picker",{staticStyle:{float:"right",height:"26px",margin:"-3px 8px 0 0"},attrs:{color:t.defaultTextColor[t.drayId]},on:{change:function(e){t.inputArr[t.drayId].color=e}}})],1)]),t._v(" "),n("span",{staticClass:"in-block choose-box"},[n("span",{staticClass:"com-tit-m12"},[t._v("纯色背景 ")]),t._v(" "),n("span",{staticClass:"w-79 in-block"},[n("theme-picker",{staticStyle:{float:"right",height:"26px",margin:"-3px 8px 0 0"},attrs:{color:t.defaultBgColor},on:{change:t.changeBg}})],1)]),t._v(" "),n("span",{staticClass:"in-block choose-box"},[t.needUploadBg?n("importFile",{attrs:{title:"自定义背景",url:"/file/upload",accept:"image/*"},on:{uploadUrl:t.uploadUrl,onChange:t.onChange}}):n("el-upload",{attrs:{action:"#","on-change":t.onChange,"show-file-list":!1,"auto-upload":!1,accept:"image/*"}},[n("el-button",{staticClass:" ",attrs:{plain:""}},[t._v("自定义背景")])],1)],1),t._v(" "),n("span",{staticClass:"in-block choose-box"},[n("el-button",{staticClass:" ",attrs:{plain:""},on:{click:t.addInput}},[t._v("插入文本")])],1),t._v(" "),n("span",{staticClass:"in-block choose-box"},[n("el-button",{staticClass:" ",attrs:{type:"primary"},on:{click:t.restoreDefault}},[t._v("恢复默认")])],1)]),t._v(" "),n("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvasBox",attrs:{width:1920,height:1080}}),t._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"imgStr",attrs:{src:t.imgStr}})]):t._e()},o=[],i=(a("47e7"),a("9e76"),a("9a33"),a("163d"),a("b18f")),r=a("af19"),s=a("83d6"),l=a.n(s),c=a("b5ab"),u=a.n(c),d={name:"index",watch:{dataPlate:{handler:function(t,e){console.log(t),t.length>0&&(this.inputArr=t,this.CoordinateArr=t.map((function(t){return{left:t.left,top:t.top}})),this.defaultTextColor=t.map((function(t){return t.color})))},immediate:!0,deep:!0},bgSrc:{handler:function(t,e){console.log(t),""!==t&&(-1===t.indexOf("/")?(this.defaultBgColor=t,this.changeBg(t)):(this.background=t,this.makeCardObject.background="url("+t+")"))},immediate:!0,deep:!0}},props:{cardWidth:String,cardHeight:String,dataPlate:Array,bgSrc:String,needUploadBg:{type:Boolean,default:!0}},directives:{drag:function(t,e,a){var n,o,i,r,s=t;document.onselectstart=function(){return!1};var l=!1,c=0,d=0;s.onclick=function(t){l&&("closeBtn"===t.target.className&&(a.context._data.inputArr.splice(Number(t.target.id),1),a.context._data.CoordinateArr.splice(Number(t.target.id),1),a.context._data.drayId=0),l=!1)},s.onmousedown=function(t){c=(new Date).getTime(),o=s,document.all?o.setCapture():window.captureEvents(Event.MOUSEMOVE),i=t.clientX-o.offsetLeft,r=t.clientY-o.offsetTop,a.context._data.drayId=Number(t.target.id),n=t.target.id,document.onmousemove=function(t){if(o){t||(t=event);var e=t.clientX-i,s=t.clientY-r,l=u()(o).parent().width()-u()(o).outerWidth(),c=u()(o).parent().height()-u()(o).outerHeight();e=e<0?0:e,e=e>l?l:e,s=s<0?0:s,s=s>c?c:s,o.style.left=e+"px",o.style.top=s+"px",n===t.target.id&&(a.context._data.inputArr[Number(t.target.id)].left=e,a.context._data.inputArr[Number(t.target.id)].top=s)}},document.onmouseup=function(){d=(new Date).getTime(),d-c<200&&(l=!0),o&&(document.all?o.releaseCapture():window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP),o="")}}}},data:function(){return{defaultInputArr:[],inputArr:[{fontFamily:"微软雅黑",fontSize:"72",fontWeight:"bold",color:"#ffffff",left:67,top:117,text:"欢迎各位领导"}],CoordinateArr:[{left:67,top:117}],restore:!0,makeCardObject:{background:"#2678C4"},background:"#2678C4",drayId:0,imgStr:"",defaultTextColor:["#FFFFFF"],defaultBgColor:"#2678C4",urlFile:null,file:null}},components:{ThemePicker:i["a"],importFile:r["a"]},mounted:function(){},methods:{addInput:function(){this.inputArr.push({fontFamily:"微软雅黑",fontSize:"24",fontWeight:"bold",color:"#ffffff",left:10,top:10,text:"新增文本"}),this.CoordinateArr.push({left:10,top:10})},handleEdit:function(){this.inputArr=[{fontFamily:"微软雅黑",fontSize:"16",fontWeight:"bold",color:"#ffffff",left:0,top:0,text:"会议一会",width:"auto"}]},changeBg:function(t){this.background=t,this.makeCardObject.background=t},uploadUrl:function(t){var e="";e=-1!==window.location.host.indexOf("localhost")?l.a.url+"/files/"+t+"?_t="+Date.parse(new Date)/1e3:window.location.protocol+"/paperless/files/"+t+"?_t="+Date.parse(new Date)/1e3,this.background=e},onChange:function(t){this.imgStr=window.webkitURL.createObjectURL(t.raw),this.makeCardObject.background="url("+window.webkitURL.createObjectURL(t.raw)+")"},fileClick:function(){this.$refs.file.click()},draw:function(){var t=this,e=this.$refs.canvasBox,a=e.getContext("2d");console.log(e.width,e.height),7===this.makeCardObject.background.length&&-1!==this.makeCardObject.background.indexOf("#")?(a.fillStyle=this.makeCardObject.background,a.fillRect(0,0,e.width,e.height)):a.drawImage(this.$refs.imgStr,0,0,e.width,e.height),this.inputArr.filter((function(e,n){var o=t.$refs["inputBox"+n][0].offsetHeight,i=parseFloat(e.fontSize/parseFloat(t.cardWidth)*1920);a.font="normal "+e.fontWeight+" "+i+"px "+e.fontFamily,a.fillStyle=e.color,a.textAlign="start";var r=1920/parseFloat(t.cardWidth),s=1080/parseFloat(t.cardHeight);a.fillText(e.text,parseInt(Number(t.CoordinateArr[n].left)*r),parseInt(Number(t.CoordinateArr[n].top+o-8)*s))})),this.urlFile=this.dataURLtoFile(e.toDataURL(),"file"+(new Date).getTime())},convertBase64UrlToBlob:function(t){var e=t.split(","),a=e[0].match(/:(.*?);/)[1],n=atob(e[1]),o=n.length,i=new Uint8Array(o);while(o--)i[o]=n.charCodeAt(o);return new Blob([i],{type:a})},dataURLtoFile:function(t,e){var a=t.split(","),n=a[0].match(/:(.*?);/)[1],o=n.split("/")[1],i=atob(a[1]),r=i.length,s=new Uint8Array(r);while(r--)s[r]=i.charCodeAt(r);return new File([s],"".concat(e,".").concat(o),{type:n})},restoreDefault:function(){this.$emit("restoreDefault")}}},p=d,f=(a("5a3a"),a("20c0"),a("e90a")),h=Object(f["a"])(p,n,o,!1,null,"4ad8ec32",null);e["a"]=h.exports},af19:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{staticClass:"ml-10",staticStyle:{display:"inline-block"},attrs:{action:"/paperless"+t.url,"show-file-list":!1,headers:t.myHeaders,data:t.main,accept:t.accept,"on-success":t.handleAvatarSuccess,"on-error":t.handlError,"on-change":t.onChange}},[a("el-button",{staticClass:" ",attrs:{plain:""}},[t._v(t._s(t.title))])],1)},o=[],i=(a("f548"),a("163d"),a("5f87")),r={name:"index",props:{url:String,title:String,meetingId:[String,Number],accept:String},watch:{meetingId:{handler:function(t){this.main.meetingId=t},immediate:!0}},data:function(){return{myHeaders:{token:Object(i["d"])()},main:{fileType:"bg",typeId:0,meetingId:""}}},methods:{handleAvatarSuccess:function(t,e){console.log(t),106===t.code?this.$confirmBox2(t.msg):200===t.code?this.$message({message:t.msg,type:"success",duration:1e3}):this.$message({message:t.msg,type:"error",duration:1e3}),"自定义背景"===this.title?this.$emit("uploadUrl",t.data.replace(/\\/g,"/")):this.$emit("uploadSus")},handlError:function(){this.$message({message:"上传失败",type:"error",duration:1e3})},onChange:function(t){this.$emit("onChange",t)}}},s=r,l=a("e90a"),c=Object(l["a"])(s,n,o,!1,null,"7ce78414",null);e["a"]=c.exports},b18f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-color-picker",{staticClass:"theme-picker",attrs:{predefine:["#409EFF","#1890ff","#304156","#212121","#11a983","#13c2c2","#6959CD","#f5222d"],"popper-class":"theme-picker-dropdown"},model:{value:t.theme,callback:function(e){t.theme=e},expression:"theme"}})},o=[],i=(a("b449"),a("17d6")),r={data:function(){return{theme:""}},props:{color:{type:String,default:"#ffffff"}},watch:{color:{handler:function(t){this.theme=t},immediate:!0},theme:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("change",e);case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},s=r,l=(a("6fa2"),a("e90a")),c=Object(l["a"])(s,n,o,!1,null,null,null);e["a"]=c.exports},c50b:function(t,e,a){},ed3a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABG0lEQVQ4T61T0VUCQRBLOrAErEDpACsAKwA6oAPODrADrICzAzsQK4AS6CC8HLP35taH+tT92p2dySYzWaJakm4AzAHMqqsWwAvJU44zHyStAKwBfABwwT7u7wPwDkBD8rnU9QCStpE0I/lWM/NZ0iSAdySXjnUA8XIDYFRTvCLxGEw2DM0HAI9+WZKBWpKFfochyTIWJFeJycgA1m3aplcSrd+xDiSK65hltga4bMhNoZsLIjYoTrInBcCdHTQugTi/Z5MeMePm3wD+JMFNnJJ8+G0TbV3PtTPQN2N0TjMYY+qoLXz7QyPZN0+eXG3laTHUF1beAXglueitnEbjftiJ71c+07hY+NNnSiDuidE9Z++9/IXtk20t8QwHoMbZ4BHkQAAAAABJRU5ErkJggg=="}}]);